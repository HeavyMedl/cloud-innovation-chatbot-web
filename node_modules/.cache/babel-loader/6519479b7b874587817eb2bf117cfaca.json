{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _AudioContextConsumer = _interopRequireDefault(require(\"./AudioContextConsumer\"));\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default(ponyfill) {\n    (0, _classCallCheck2.default)(this, _default);\n    this.consumer = null;\n    this.paused = false;\n    this.ponyfill = ponyfill;\n    this.queue = [];\n  }\n\n  (0, _createClass2.default)(_default, [{\n    key: \"pause\",\n    value: function pause() {\n      this.paused = true;\n      this.consumer && this.consumer.pause();\n    }\n  }, {\n    key: \"push\",\n    value: function push(utterance) {\n      this.queue.push(utterance);\n      this.startConsumer();\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      this.paused = false;\n\n      if (this.consumer) {\n        this.consumer.resume();\n      } else {\n        this.startConsumer();\n      }\n    }\n  }, {\n    key: \"startConsumer\",\n    value: function () {\n      var _startConsumer = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee() {\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!this.paused && this.queue.length && !this.consumer)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                this.consumer = new _AudioContextConsumer.default();\n                _context.next = 4;\n                return this.consumer.start(this.queue, this.ponyfill);\n\n              case 4:\n                this.consumer = null;\n                _context.next = 0;\n                break;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function startConsumer() {\n        return _startConsumer.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.queue.splice(0);\n      this.consumer && this.consumer.stop();\n    }\n  }, {\n    key: \"speaking\",\n    get: function get() {\n      return !!this.consumer;\n    }\n  }]);\n  return _default;\n}();\n\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}