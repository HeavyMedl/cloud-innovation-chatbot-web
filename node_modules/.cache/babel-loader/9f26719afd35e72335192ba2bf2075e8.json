{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createDefaultCardActionMiddleware;\n\nvar _botframeworkWebchatCore = require(\"botframework-webchat-core\");\n\nfunction createDefaultCardActionMiddleware() {\n  return function (_ref) {\n    var dispatch = _ref.dispatch;\n    return function (next) {\n      return function (_ref2) {\n        var cardAction = _ref2.cardAction,\n            getSignInUrl = _ref2.getSignInUrl;\n        var displayText = cardAction.displayText,\n            text = cardAction.text,\n            type = cardAction.type,\n            value = cardAction.value;\n\n        switch (type) {\n          case 'imBack':\n            if (typeof value === 'string') {\n              // TODO: [P4] Instead of calling dispatch, we should move to dispatchers instead for completeness\n              dispatch((0, _botframeworkWebchatCore.sendMessage)(value, 'imBack'));\n            } else {\n              throw new Error('cannot send \"imBack\" with a non-string value');\n            }\n\n            break;\n\n          case 'messageBack':\n            dispatch((0, _botframeworkWebchatCore.sendMessageBack)(value, text, displayText));\n            break;\n\n          case 'postBack':\n            dispatch((0, _botframeworkWebchatCore.sendPostBack)(value));\n            break;\n\n          case 'call':\n          case 'downloadFile':\n          case 'openUrl':\n          case 'playAudio':\n          case 'playVideo':\n          case 'showImage':\n            window.open(value);\n            break;\n\n          case 'signin':\n            // TODO: [P3] We should prime the URL into the OAuthCard directly, instead of calling getSessionId on-demand\n            //       This is to eliminate the delay between window.open() and location.href call\n            var popup = window.open();\n            getSignInUrl().then(function (url) {\n              return popup.location.href = url;\n            });\n            break;\n\n          default:\n            return next({\n              cardAction: cardAction,\n              getSignInUrl: getSignInUrl\n            });\n        }\n      };\n    };\n  };\n}","map":null,"metadata":{},"sourceType":"script"}