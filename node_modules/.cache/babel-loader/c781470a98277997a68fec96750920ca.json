{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.connectCarouselFilmStrip = exports.default = void 0;\n\nvar _glamor = require(\"glamor\");\n\nvar _reactFilm = require(\"react-film\");\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _botframeworkWebchatCore = require(\"botframework-webchat-core\");\n\nvar _Localize = require(\"../Localization/Localize\");\n\nvar _Avatar = _interopRequireDefault(require(\"./Avatar\"));\n\nvar _Bubble = _interopRequireDefault(require(\"./Bubble\"));\n\nvar _connectToWebChat = _interopRequireDefault(require(\"../connectToWebChat\"));\n\nvar _SendStatus = _interopRequireDefault(require(\"./SendStatus\"));\n\nvar _textFormatToContentType = _interopRequireDefault(require(\"../Utils/textFormatToContentType\"));\n\nvar _Timestamp = _interopRequireDefault(require(\"./Timestamp\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar _Constants$ActivityCl = _botframeworkWebchatCore.Constants.ActivityClientState,\n    SENDING = _Constants$ActivityCl.SENDING,\n    SEND_FAILED = _Constants$ActivityCl.SEND_FAILED;\nvar ROOT_CSS = (0, _glamor.css)({\n  display: 'flex',\n  MsOverflowStyle: 'none',\n  overflowX: 'scroll',\n  overflowY: 'hidden',\n  touchAction: 'manipulation',\n  WebkitOverflowScrolling: 'touch',\n  '&::-webkit-scrollbar': {\n    display: 'none'\n  },\n  '& > .avatar': {\n    flexShrink: 0\n  },\n  '& > .content': {\n    flex: 1,\n    '& > .message': {\n      display: 'flex',\n      '& > .bubble': {\n        flexGrow: 1,\n        overflow: 'hidden'\n      },\n      '& > .filler': {\n        flexGrow: 10000,\n        flexShrink: 1\n      }\n    },\n    '& > ul': {\n      display: 'flex',\n      listStyleType: 'none',\n      margin: 0,\n      padding: 0,\n      '& > li': {\n        flex: 1\n      }\n    }\n  }\n});\n\nvar connectCarouselFilmStrip = function connectCarouselFilmStrip() {\n  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {\n    selectors[_key] = arguments[_key];\n  }\n\n  return _connectToWebChat.default.apply(void 0, [function (_ref, _ref2) {\n    var language = _ref.language,\n        _ref$styleSet$options = _ref.styleSet.options,\n        botAvatarInitials = _ref$styleSet$options.botAvatarInitials,\n        userAvatarInitials = _ref$styleSet$options.userAvatarInitials;\n    var activity = _ref2.activity;\n    return {\n      avatarInitials: activity.from && activity.from.role === 'user' ? userAvatarInitials : botAvatarInitials,\n      language: language\n    };\n  }].concat(selectors));\n};\n\nexports.connectCarouselFilmStrip = connectCarouselFilmStrip;\nvar ConnectedCarouselFilmStrip = connectCarouselFilmStrip(function (_ref3) {\n  var avatarInitials = _ref3.avatarInitials,\n      language = _ref3.language,\n      styleSet = _ref3.styleSet;\n  return {\n    avatarInitials: avatarInitials,\n    language: language,\n    styleSet: styleSet\n  };\n})(function (_ref4) {\n  var activity = _ref4.activity,\n      avatarInitials = _ref4.avatarInitials,\n      children = _ref4.children,\n      language = _ref4.language,\n      className = _ref4.className,\n      itemContainerRef = _ref4.itemContainerRef,\n      scrollableRef = _ref4.scrollableRef,\n      styleSet = _ref4.styleSet,\n      timestampClassName = _ref4.timestampClassName;\n  var fromUser = activity.from.role === 'user';\n  var ariaLabel = (0, _Localize.localize)('Bot said something', language, avatarInitials, activity.text, activity.timestamp);\n  var activityDisplayText = activity.channelData && activity.channelData.messageBack && activity.channelData.messageBack.displayText || activity.text;\n  return _react.default.createElement(\"div\", {\n    className: (0, _classnames.default)(ROOT_CSS + '', styleSet.carouselFilmStrip + '', (className || '') + ''),\n    ref: scrollableRef\n  }, _react.default.createElement(_Avatar.default, {\n    \"aria-hidden\": true,\n    className: \"avatar\",\n    fromUser: fromUser\n  }), _react.default.createElement(\"div\", {\n    className: \"content\"\n  }, !!activityDisplayText && _react.default.createElement(\"div\", {\n    className: \"message\"\n  }, _react.default.createElement(_Bubble.default, {\n    \"aria-label\": ariaLabel,\n    className: \"bubble\",\n    fromUser: fromUser\n  }, children({\n    activity: activity,\n    attachment: {\n      contentType: (0, _textFormatToContentType.default)(activity.textFormat),\n      content: activityDisplayText\n    }\n  })), _react.default.createElement(\"div\", {\n    className: \"filler\"\n  })), _react.default.createElement(\"ul\", {\n    ref: itemContainerRef\n  }, activity.attachments.map(function (attachment, index) {\n    return _react.default.createElement(\"li\", {\n      key: index\n    }, _react.default.createElement(_Bubble.default, {\n      fromUser: fromUser,\n      key: index\n    }, children({\n      attachment: attachment\n    })));\n  })), _react.default.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: \"webchat__row\"\n  }, activity.channelData && (activity.channelData.state === SENDING || activity.channelData.state === SEND_FAILED) ? _react.default.createElement(_SendStatus.default, {\n    activity: activity\n  }) : _react.default.createElement(_Timestamp.default, {\n    activity: activity,\n    className: timestampClassName\n  }))));\n});\n\nvar _default = function _default(props) {\n  return _react.default.createElement(_reactFilm.Context.Consumer, null, function (_ref5) {\n    var itemContainerRef = _ref5.itemContainerRef,\n        scrollableRef = _ref5.scrollableRef;\n    return _react.default.createElement(ConnectedCarouselFilmStrip, _extends({\n      itemContainerRef: itemContainerRef,\n      scrollableRef: scrollableRef\n    }, props));\n  });\n};\n\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}