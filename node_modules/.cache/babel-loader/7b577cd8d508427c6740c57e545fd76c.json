{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Exports_1 = require(\"../common/Exports\");\n\nvar WebsocketMessageAdapter_1 = require(\"./WebsocketMessageAdapter\");\n\nvar WebsocketConnection =\n/** @class */\nfunction () {\n  function WebsocketConnection(uri, queryParameters, headers, messageFormatter, connectionId) {\n    var _this = this;\n\n    this.isDisposed = false;\n\n    this.Dispose = function () {\n      _this.isDisposed = true;\n\n      if (_this.connectionMessageAdapter) {\n        _this.connectionMessageAdapter.Close();\n      }\n    };\n\n    this.IsDisposed = function () {\n      return _this.isDisposed;\n    };\n\n    this.State = function () {\n      return _this.connectionMessageAdapter.State;\n    };\n\n    this.Open = function () {\n      return _this.connectionMessageAdapter.Open();\n    };\n\n    this.Send = function (message) {\n      return _this.connectionMessageAdapter.Send(message);\n    };\n\n    this.Read = function () {\n      return _this.connectionMessageAdapter.Read();\n    };\n\n    if (!uri) {\n      throw new Exports_1.ArgumentNullError(\"uri\");\n    }\n\n    if (!messageFormatter) {\n      throw new Exports_1.ArgumentNullError(\"messageFormatter\");\n    }\n\n    this.messageFormatter = messageFormatter;\n    var queryParams = \"\";\n    var i = 0;\n\n    if (queryParameters) {\n      for (var paramName in queryParameters) {\n        if (paramName) {\n          queryParams += i === 0 ? \"?\" : \"&\";\n          var val = encodeURIComponent(queryParameters[paramName]);\n          queryParams += paramName + \"=\" + val;\n          i++;\n        }\n      }\n    }\n\n    if (headers) {\n      for (var headerName in headers) {\n        if (headerName) {\n          queryParams += i === 0 ? \"?\" : \"&\";\n          var val = encodeURIComponent(headers[headerName]);\n          queryParams += headerName + \"=\" + val;\n          i++;\n        }\n      }\n    }\n\n    this.uri = uri + queryParams;\n    this.id = connectionId ? connectionId : Exports_1.CreateNoDashGuid();\n    this.connectionMessageAdapter = new WebsocketMessageAdapter_1.WebsocketMessageAdapter(this.uri, this.Id, this.messageFormatter);\n  }\n\n  Object.defineProperty(WebsocketConnection.prototype, \"Id\", {\n    get: function () {\n      return this.id;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(WebsocketConnection.prototype, \"Events\", {\n    get: function () {\n      return this.connectionMessageAdapter.Events;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return WebsocketConnection;\n}();\n\nexports.WebsocketConnection = WebsocketConnection;","map":null,"metadata":{},"sourceType":"script"}