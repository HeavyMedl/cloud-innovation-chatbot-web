{"version":3,"sources":["../../src/Util/createPromiseQueue.js"],"names":["shiftDeferred","queue","push","value","resolve","shift","length","Promise","promise"],"mappings":";;;;;;;;;AAAA;;AAEe,oBAAY;AACzB,MAAIA,aAAJ;AACA,MAAMC,KAAK,GAAG,EAAd;;AAEA,MAAMC,IAAI,GAAG,SAAPA,IAAO,CAAAC,KAAK,EAAI;AACpB,QAAIH,aAAJ,EAAmB;AAAA,2BACGA,aADH;AAAA,UACTI,OADS,kBACTA,OADS;AAGjBJ,MAAAA,aAAa,GAAG,IAAhB;AACAI,MAAAA,OAAO,CAACD,KAAD,CAAP;AACD,KALD,MAKO;AACLF,MAAAA,KAAK,CAACC,IAAN,CAAWC,KAAX;AACD;AACF,GATD;;AAWA,MAAME,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClB,QAAIJ,KAAK,CAACK,MAAV,EAAkB;AAChB,aAAOC,OAAO,CAACH,OAAR,CAAgBH,KAAK,CAACI,KAAN,EAAhB,CAAP;AACD,KAFD,MAEO;AACL,aAAO,CAACL,aAAa,KAAKA,aAAa,GAAG,8BAArB,CAAd,EAAsDQ,OAA7D;AACD;AACF,GAND;;AAQA,SAAO;AACLN,IAAAA,IAAI,EAAJA,IADK;AAELG,IAAAA,KAAK,EAALA;AAFK,GAAP;AAID","sourcesContent":["import createDeferred from './createDeferred';\n\nexport default function () {\n  let shiftDeferred;\n  const queue = [];\n\n  const push = value => {\n    if (shiftDeferred) {\n      const { resolve } = shiftDeferred;\n\n      shiftDeferred = null;\n      resolve(value);\n    } else {\n      queue.push(value);\n    }\n  };\n\n  const shift = () => {\n    if (queue.length) {\n      return Promise.resolve(queue.shift());\n    } else {\n      return (shiftDeferred || (shiftDeferred = createDeferred())).promise;\n    }\n  };\n\n  return {\n    push,\n    shift\n  }\n}\n"],"file":"createPromiseQueue.js"}