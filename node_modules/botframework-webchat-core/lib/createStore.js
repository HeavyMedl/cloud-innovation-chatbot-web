"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = _default;

var _redux = require("redux");

var _reduxSaga = _interopRequireDefault(require("redux-saga"));

var _reducer = _interopRequireDefault(require("./reducer"));

var _sagas = _interopRequireDefault(require("./sagas"));

function _default(initialState) {
  var sagaMiddleware = (0, _reduxSaga["default"])({
    onError: function onError() {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      var err = args[0];
      console.error(err);
      store.dispatch({
        type: 'WEB_CHAT/SAGA_ERROR'
      });
    }
  });

  for (var _len = arguments.length, middlewares = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    middlewares[_key - 1] = arguments[_key];
  }

  var store = (0, _redux.createStore)(_reducer["default"], initialState || {}, _redux.applyMiddleware.apply(void 0, middlewares.concat([sagaMiddleware])));
  sagaMiddleware.run(_sagas["default"]);
  return store;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVTdG9yZS50cyJdLCJuYW1lcyI6WyJpbml0aWFsU3RhdGUiLCJzYWdhTWlkZGxld2FyZSIsIm9uRXJyb3IiLCJhcmdzIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RvcmUiLCJkaXNwYXRjaCIsInR5cGUiLCJtaWRkbGV3YXJlcyIsInJlZHVjZXIiLCJhcHBseU1pZGRsZXdhcmUiLCJydW4iLCJzYWdhcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBS2Usa0JBQVVBLFlBQVYsRUFBd0M7QUFDckQsTUFBTUMsY0FBYyxHQUFHLDJCQUFxQjtBQUMxQ0MsSUFBQUEsT0FBTyxFQUFFLG1CQUFhO0FBQUEseUNBQVRDLElBQVM7QUFBVEEsUUFBQUEsSUFBUztBQUFBOztBQUFBLFVBQ2JDLEdBRGEsR0FDTkQsSUFETTtBQUdwQkUsTUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWNGLEdBQWQ7QUFFQUcsTUFBQUEsS0FBSyxDQUFDQyxRQUFOLENBQWU7QUFBRUMsUUFBQUEsSUFBSSxFQUFFO0FBQVIsT0FBZjtBQUNEO0FBUHlDLEdBQXJCLENBQXZCOztBQURxRCxvQ0FBYkMsV0FBYTtBQUFiQSxJQUFBQSxXQUFhO0FBQUE7O0FBV3JELE1BQU1ILEtBQW1CLEdBQUcsd0JBQzFCSSxtQkFEMEIsRUFFMUJYLFlBQVksSUFBSSxFQUZVLEVBRzFCWSxxQ0FDS0YsV0FETCxTQUVFVCxjQUZGLEdBSDBCLENBQTVCO0FBU0FBLEVBQUFBLGNBQWMsQ0FBQ1ksR0FBZixDQUFtQkMsaUJBQW5CO0FBRUEsU0FBT1AsS0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXBwbHlNaWRkbGV3YXJlLCBjcmVhdGVTdG9yZSwgU3RvcmUgfSBmcm9tICdyZWR1eCc7XG5pbXBvcnQgY3JlYXRlU2FnYU1pZGRsZXdhcmUgZnJvbSAncmVkdXgtc2FnYSc7XG5cbmltcG9ydCByZWR1Y2VyIGZyb20gJy4vcmVkdWNlcic7XG5pbXBvcnQgc2FnYXMgZnJvbSAnLi9zYWdhcyc7XG5cbmV4cG9ydCB0eXBlIFN0YXRlID0ge31cbmV4cG9ydCB0eXBlIENoYXRTdG9yZSA9IFN0b3JlPFN0YXRlPlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlLCAuLi5taWRkbGV3YXJlcykge1xuICBjb25zdCBzYWdhTWlkZGxld2FyZSA9IGNyZWF0ZVNhZ2FNaWRkbGV3YXJlKHtcbiAgICBvbkVycm9yOiAoLi4uYXJncykgPT4ge1xuICAgICAgY29uc3QgW2Vycl0gPSBhcmdzO1xuXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG5cbiAgICAgIHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogJ1dFQl9DSEFUL1NBR0FfRVJST1InIH0pO1xuICAgIH1cbiAgIH0pO1xuXG4gIGNvbnN0IHN0b3JlOiBTdG9yZTxTdGF0ZT4gPSBjcmVhdGVTdG9yZShcbiAgICByZWR1Y2VyLFxuICAgIGluaXRpYWxTdGF0ZSB8fCB7fSxcbiAgICBhcHBseU1pZGRsZXdhcmUoXG4gICAgICAuLi5taWRkbGV3YXJlcyxcbiAgICAgIHNhZ2FNaWRkbGV3YXJlXG4gICAgKVxuICApO1xuXG4gIHNhZ2FNaWRkbGV3YXJlLnJ1bihzYWdhcyk7XG5cbiAgcmV0dXJuIHN0b3JlO1xufVxuIl19