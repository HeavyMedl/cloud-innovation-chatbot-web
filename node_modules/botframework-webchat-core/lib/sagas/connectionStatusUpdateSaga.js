"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = _callee;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _effects = require("redux-saga/effects");

var _observeEach = _interopRequireDefault(require("./effects/observeEach"));

var _whileConnected = _interopRequireDefault(require("./effects/whileConnected"));

var _connectionStatusUpdate = _interopRequireDefault(require("../actions/connectionStatusUpdate"));

var _setReferenceGrammarID = _interopRequireDefault(require("../actions/setReferenceGrammarID"));

var _marked =
/*#__PURE__*/
_regenerator["default"].mark(_callee),
    _marked2 =
/*#__PURE__*/
_regenerator["default"].mark(observeConnectionStatus);

function _callee() {
  return _regenerator["default"].wrap(function _callee$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0, _whileConnected["default"])(observeConnectionStatus);

        case 2:
        case "end":
          return _context.stop();
      }
    }
  }, _marked);
}

function observeConnectionStatus(_ref) {
  var directLine;
  return _regenerator["default"].wrap(function observeConnectionStatus$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          directLine = _ref.directLine;
          _context3.next = 3;
          return (0, _observeEach["default"])(directLine.connectionStatus$,
          /*#__PURE__*/
          _regenerator["default"].mark(function _callee2(connectionStatus) {
            return _regenerator["default"].wrap(function _callee2$(_context2) {
              while (1) {
                switch (_context2.prev = _context2.next) {
                  case 0:
                    _context2.next = 2;
                    return (0, _effects.put)((0, _connectionStatusUpdate["default"])(connectionStatus));

                  case 2:
                    _context2.next = 4;
                    return (0, _effects.put)((0, _setReferenceGrammarID["default"])(directLine.referenceGrammarId));

                  case 4:
                  case "end":
                    return _context2.stop();
                }
              }
            }, _callee2);
          }));

        case 3:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked2);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zYWdhcy9jb25uZWN0aW9uU3RhdHVzVXBkYXRlU2FnYS5qcyJdLCJuYW1lcyI6WyJvYnNlcnZlQ29ubmVjdGlvblN0YXR1cyIsImRpcmVjdExpbmUiLCJjb25uZWN0aW9uU3RhdHVzJCIsImNvbm5lY3Rpb25TdGF0dXMiLCJyZWZlcmVuY2VHcmFtbWFySWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBSUE7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7Ozs7NkJBTVVBLHVCOztBQUpLO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNiLGlCQUFNLGdDQUFlQSx1QkFBZixDQUFOOztBQURhO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUlmLFNBQVVBLHVCQUFWO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFvQ0MsVUFBQUEsVUFBcEMsUUFBb0NBLFVBQXBDO0FBQUE7QUFDRSxpQkFBTSw2QkFBWUEsVUFBVSxDQUFDQyxpQkFBdkI7QUFBQTtBQUFBLHVDQUEwQyxrQkFBV0MsZ0JBQVg7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQzlDLDJCQUFNLGtCQUFJLHdDQUF1QkEsZ0JBQXZCLENBQUosQ0FBTjs7QUFEOEM7QUFBQTtBQUU5QywyQkFBTSxrQkFBSSx1Q0FBc0JGLFVBQVUsQ0FBQ0csa0JBQWpDLENBQUosQ0FBTjs7QUFGOEM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FBMUMsRUFBTjs7QUFERjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHB1dFxufSBmcm9tICdyZWR1eC1zYWdhL2VmZmVjdHMnO1xuXG5pbXBvcnQgb2JzZXJ2ZUVhY2ggZnJvbSAnLi9lZmZlY3RzL29ic2VydmVFYWNoJztcbmltcG9ydCB3aGlsZUNvbm5lY3RlZCBmcm9tICcuL2VmZmVjdHMvd2hpbGVDb25uZWN0ZWQnO1xuXG5pbXBvcnQgY29ubmVjdGlvblN0YXR1c1VwZGF0ZSBmcm9tICcuLi9hY3Rpb25zL2Nvbm5lY3Rpb25TdGF0dXNVcGRhdGUnO1xuaW1wb3J0IHNldFJlZmVyZW5jZUdyYW1tYXJJRCBmcm9tICcuLi9hY3Rpb25zL3NldFJlZmVyZW5jZUdyYW1tYXJJRCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKiAoKSB7XG4gIHlpZWxkIHdoaWxlQ29ubmVjdGVkKG9ic2VydmVDb25uZWN0aW9uU3RhdHVzKTtcbn1cblxuZnVuY3Rpb24qIG9ic2VydmVDb25uZWN0aW9uU3RhdHVzKHsgZGlyZWN0TGluZSB9KSB7XG4gIHlpZWxkIG9ic2VydmVFYWNoKGRpcmVjdExpbmUuY29ubmVjdGlvblN0YXR1cyQsIGZ1bmN0aW9uKiAoY29ubmVjdGlvblN0YXR1cykge1xuICAgIHlpZWxkIHB1dChjb25uZWN0aW9uU3RhdHVzVXBkYXRlKGNvbm5lY3Rpb25TdGF0dXMpKTtcbiAgICB5aWVsZCBwdXQoc2V0UmVmZXJlbmNlR3JhbW1hcklEKGRpcmVjdExpbmUucmVmZXJlbmNlR3JhbW1hcklkKSk7XG4gIH0pO1xufVxuIl19