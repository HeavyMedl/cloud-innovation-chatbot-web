"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _react = _interopRequireDefault(require("react"));

var _AudioAttachment = _interopRequireDefault(require("../../Attachment/AudioAttachment"));

var _DownloadAttachment = _interopRequireDefault(require("../../Attachment/DownloadAttachment"));

var _ImageAttachment = _interopRequireDefault(require("../../Attachment/ImageAttachment"));

var _TextAttachment = _interopRequireDefault(require("../../Attachment/TextAttachment"));

var _TypingActivity = _interopRequireDefault(require("../../Attachment/TypingActivity"));

var _VideoAttachment = _interopRequireDefault(require("../../Attachment/VideoAttachment"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// TODO: [P4] Rename this file or the whole middleware, it looks either too simple or too comprehensive now
function _default() {
  return function () {
    return function (next) {
      return function (_ref) {
        var activity = _ref.activity,
            attachment = _ref.attachment,
            contentType = _ref.attachment.contentType;
        return activity.type === 'typing' ? _react.default.createElement(_TypingActivity.default, null) : /^audio\//.test(contentType) ? _react.default.createElement(_AudioAttachment.default, {
          activity: activity,
          attachment: attachment
        }) : /^image\//.test(contentType) ? _react.default.createElement(_ImageAttachment.default, {
          activity: activity,
          attachment: attachment
        }) : /^video\//.test(contentType) ? _react.default.createElement(_VideoAttachment.default, {
          activity: activity,
          attachment: attachment
        }) : attachment.contentUrl || contentType === 'application/octet-stream' ? _react.default.createElement(_DownloadAttachment.default, {
          activity: activity,
          attachment: attachment
        }) : /^text\//.test(contentType) ? _react.default.createElement(_TextAttachment.default, {
          activity: activity,
          attachment: attachment
        }) : next({
          activity: activity,
          attachment: attachment
        });
      };
    };
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9NaWRkbGV3YXJlL0F0dGFjaG1lbnQvY3JlYXRlQ29yZU1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsibmV4dCIsImFjdGl2aXR5IiwiYXR0YWNobWVudCIsImNvbnRlbnRUeXBlIiwidHlwZSIsInRlc3QiLCJjb250ZW50VXJsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQTtBQUNlLG9CQUFZO0FBQ3pCLFNBQU87QUFBQSxXQUFNLFVBQUFBLElBQUk7QUFBQSxhQUFJO0FBQUEsWUFBR0MsUUFBSCxRQUFHQSxRQUFIO0FBQUEsWUFBYUMsVUFBYixRQUFhQSxVQUFiO0FBQUEsWUFBdUNDLFdBQXZDLFFBQXlCRCxVQUF6QixDQUF1Q0MsV0FBdkM7QUFBQSxlQUNuQkYsUUFBUSxDQUFDRyxJQUFULEtBQWtCLFFBQWxCLEdBQ0UsNkJBQUMsdUJBQUQsT0FERixHQUVFLFdBQVdDLElBQVgsQ0FBZ0JGLFdBQWhCLElBQ0EsNkJBQUMsd0JBQUQ7QUFBaUIsVUFBQSxRQUFRLEVBQUdGLFFBQTVCO0FBQXVDLFVBQUEsVUFBVSxFQUFHQztBQUFwRCxVQURBLEdBRUEsV0FBV0csSUFBWCxDQUFnQkYsV0FBaEIsSUFDQSw2QkFBQyx3QkFBRDtBQUFpQixVQUFBLFFBQVEsRUFBR0YsUUFBNUI7QUFBdUMsVUFBQSxVQUFVLEVBQUdDO0FBQXBELFVBREEsR0FFQSxXQUFXRyxJQUFYLENBQWdCRixXQUFoQixJQUNBLDZCQUFDLHdCQUFEO0FBQWlCLFVBQUEsUUFBUSxFQUFHRixRQUE1QjtBQUF1QyxVQUFBLFVBQVUsRUFBR0M7QUFBcEQsVUFEQSxHQUVDQSxVQUFVLENBQUNJLFVBQVgsSUFBeUJILFdBQVcsS0FBSywwQkFBMUMsR0FDQSw2QkFBQywyQkFBRDtBQUFvQixVQUFBLFFBQVEsRUFBR0YsUUFBL0I7QUFBMEMsVUFBQSxVQUFVLEVBQUdDO0FBQXZELFVBREEsR0FFQSxVQUFVRyxJQUFWLENBQWVGLFdBQWYsSUFDQSw2QkFBQyx1QkFBRDtBQUFnQixVQUFBLFFBQVEsRUFBR0YsUUFBM0I7QUFBc0MsVUFBQSxVQUFVLEVBQUdDO0FBQW5ELFVBREEsR0FHQUYsSUFBSSxDQUFDO0FBQUVDLFVBQUFBLFFBQVEsRUFBUkEsUUFBRjtBQUFZQyxVQUFBQSxVQUFVLEVBQVZBO0FBQVosU0FBRCxDQWRhO0FBQUEsT0FBSjtBQUFBLEtBQVY7QUFBQSxHQUFQO0FBZUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgQXVkaW9BdHRhY2htZW50IGZyb20gJy4uLy4uL0F0dGFjaG1lbnQvQXVkaW9BdHRhY2htZW50JztcbmltcG9ydCBEb3dubG9hZEF0dGFjaG1lbnQgZnJvbSAnLi4vLi4vQXR0YWNobWVudC9Eb3dubG9hZEF0dGFjaG1lbnQnO1xuaW1wb3J0IEltYWdlQXR0YWNobWVudCBmcm9tICcuLi8uLi9BdHRhY2htZW50L0ltYWdlQXR0YWNobWVudCc7XG5pbXBvcnQgVGV4dEF0dGFjaG1lbnQgZnJvbSAnLi4vLi4vQXR0YWNobWVudC9UZXh0QXR0YWNobWVudCc7XG5pbXBvcnQgVHlwaW5nQWN0aXZpdHkgZnJvbSAnLi4vLi4vQXR0YWNobWVudC9UeXBpbmdBY3Rpdml0eSc7XG5pbXBvcnQgVmlkZW9BdHRhY2htZW50IGZyb20gJy4uLy4uL0F0dGFjaG1lbnQvVmlkZW9BdHRhY2htZW50JztcblxuLy8gVE9ETzogW1A0XSBSZW5hbWUgdGhpcyBmaWxlIG9yIHRoZSB3aG9sZSBtaWRkbGV3YXJlLCBpdCBsb29rcyBlaXRoZXIgdG9vIHNpbXBsZSBvciB0b28gY29tcHJlaGVuc2l2ZSBub3dcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICgpID0+IG5leHQgPT4gKHsgYWN0aXZpdHksIGF0dGFjaG1lbnQsIGF0dGFjaG1lbnQ6IHsgY29udGVudFR5cGUgfSB9KSA9PlxuICAgIGFjdGl2aXR5LnR5cGUgPT09ICd0eXBpbmcnID9cbiAgICAgIDxUeXBpbmdBY3Rpdml0eSAvPlxuICAgIDogL15hdWRpb1xcLy8udGVzdChjb250ZW50VHlwZSkgP1xuICAgICAgPEF1ZGlvQXR0YWNobWVudCBhY3Rpdml0eT17IGFjdGl2aXR5IH0gYXR0YWNobWVudD17IGF0dGFjaG1lbnQgfSAvPlxuICAgIDogL15pbWFnZVxcLy8udGVzdChjb250ZW50VHlwZSkgP1xuICAgICAgPEltYWdlQXR0YWNobWVudCBhY3Rpdml0eT17IGFjdGl2aXR5IH0gYXR0YWNobWVudD17IGF0dGFjaG1lbnQgfSAvPlxuICAgIDogL152aWRlb1xcLy8udGVzdChjb250ZW50VHlwZSkgP1xuICAgICAgPFZpZGVvQXR0YWNobWVudCBhY3Rpdml0eT17IGFjdGl2aXR5IH0gYXR0YWNobWVudD17IGF0dGFjaG1lbnQgfSAvPlxuICAgIDogKGF0dGFjaG1lbnQuY29udGVudFVybCB8fCBjb250ZW50VHlwZSA9PT0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpID9cbiAgICAgIDxEb3dubG9hZEF0dGFjaG1lbnQgYWN0aXZpdHk9eyBhY3Rpdml0eSB9IGF0dGFjaG1lbnQ9eyBhdHRhY2htZW50IH0gLz5cbiAgICA6IC9edGV4dFxcLy8udGVzdChjb250ZW50VHlwZSkgP1xuICAgICAgPFRleHRBdHRhY2htZW50IGFjdGl2aXR5PXsgYWN0aXZpdHkgfSBhdHRhY2htZW50PXsgYXR0YWNobWVudCB9IC8+XG4gICAgOlxuICAgICAgbmV4dCh7IGFjdGl2aXR5LCBhdHRhY2htZW50IH0pO1xufVxuIl19