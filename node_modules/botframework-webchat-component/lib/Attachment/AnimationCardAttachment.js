"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _memoizeOne = _interopRequireDefault(require("memoize-one"));

var _react = _interopRequireDefault(require("react"));

var _AdaptiveCardBuilder = require("../Utils/AdaptiveCardBuilder");

var _CommonCard = _interopRequireDefault(require("./CommonCard"));

var _connectToWebChat = _interopRequireDefault(require("../connectToWebChat"));

var _ImageContent = _interopRequireDefault(require("./ImageContent"));

var _VideoContent = _interopRequireDefault(require("./VideoContent"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

var AnimationCardAttachment =
/*#__PURE__*/
function (_React$Component) {
  _inherits(AnimationCardAttachment, _React$Component);

  function AnimationCardAttachment(props) {
    var _this;

    _classCallCheck(this, AnimationCardAttachment);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnimationCardAttachment).call(this, props));
    _this.buildCard = (0, _memoizeOne.default)(function (adaptiveCards, content) {
      var builder = new _AdaptiveCardBuilder.AdaptiveCardBuilder(adaptiveCards);
      (content.images || []).forEach(function (image) {
        return builder.addImage(image.url, null, image.tap);
      });
      builder.addCommon(content);
      return builder.card;
    });
    return _this;
  }

  _createClass(AnimationCardAttachment, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          adaptiveCards = _this$props.adaptiveCards,
          attachment = _this$props.attachment,
          styleSet = _this$props.styleSet;

      var _ref = attachment || {},
          _ref$content = _ref.content,
          content = _ref$content === void 0 ? {} : _ref$content;

      return _react.default.createElement("div", {
        className: styleSet.animationCardAttachment
      }, _react.default.createElement("ul", {
        className: "media-list"
      }, content.media.map(function (media, index) {
        return _react.default.createElement("li", {
          key: index
        }, /\.gif$/i.test(media.url) ? _react.default.createElement(_ImageContent.default, {
          alt: media.profile,
          src: media.url
        }) : _react.default.createElement(_VideoContent.default, {
          alt: media.profile,
          src: media.url
        }));
      })), _react.default.createElement(_CommonCard.default, {
        adaptiveCards: adaptiveCards,
        attachment: attachment
      }));
    }
  }]);

  return AnimationCardAttachment;
}(_react.default.Component);

var _default = (0, _connectToWebChat.default)(function (_ref2) {
  var styleSet = _ref2.styleSet;
  return {
    styleSet: styleSet
  };
})(AnimationCardAttachment);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BdHRhY2htZW50L0FuaW1hdGlvbkNhcmRBdHRhY2htZW50LmpzIl0sIm5hbWVzIjpbIkFuaW1hdGlvbkNhcmRBdHRhY2htZW50IiwicHJvcHMiLCJidWlsZENhcmQiLCJhZGFwdGl2ZUNhcmRzIiwiY29udGVudCIsImJ1aWxkZXIiLCJBZGFwdGl2ZUNhcmRCdWlsZGVyIiwiaW1hZ2VzIiwiZm9yRWFjaCIsImltYWdlIiwiYWRkSW1hZ2UiLCJ1cmwiLCJ0YXAiLCJhZGRDb21tb24iLCJjYXJkIiwiYXR0YWNobWVudCIsInN0eWxlU2V0IiwiYW5pbWF0aW9uQ2FyZEF0dGFjaG1lbnQiLCJtZWRpYSIsIm1hcCIsImluZGV4IiwidGVzdCIsInByb2ZpbGUiLCJSZWFjdCIsIkNvbXBvbmVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBRU1BLHVCOzs7OztBQUNKLG1DQUFZQyxLQUFaLEVBQW1CO0FBQUE7O0FBQUE7O0FBQ2pCLGlHQUFNQSxLQUFOO0FBRUEsVUFBS0MsU0FBTCxHQUFpQix5QkFBUSxVQUFDQyxhQUFELEVBQWdCQyxPQUFoQixFQUE0QjtBQUNuRCxVQUFNQyxPQUFPLEdBQUcsSUFBSUMsd0NBQUosQ0FBd0JILGFBQXhCLENBQWhCO0FBRUEsT0FBQ0MsT0FBTyxDQUFDRyxNQUFSLElBQWtCLEVBQW5CLEVBQXVCQyxPQUF2QixDQUErQixVQUFBQyxLQUFLO0FBQUEsZUFBSUosT0FBTyxDQUFDSyxRQUFSLENBQWlCRCxLQUFLLENBQUNFLEdBQXZCLEVBQTRCLElBQTVCLEVBQWtDRixLQUFLLENBQUNHLEdBQXhDLENBQUo7QUFBQSxPQUFwQztBQUVBUCxNQUFBQSxPQUFPLENBQUNRLFNBQVIsQ0FBa0JULE9BQWxCO0FBRUEsYUFBT0MsT0FBTyxDQUFDUyxJQUFmO0FBQ0QsS0FSZ0IsQ0FBakI7QUFIaUI7QUFZbEI7Ozs7NkJBRVE7QUFBQSx3QkFDb0QsSUFEcEQsQ0FDQ2IsS0FERDtBQUFBLFVBQ1VFLGFBRFYsZUFDVUEsYUFEVjtBQUFBLFVBQ3lCWSxVQUR6QixlQUN5QkEsVUFEekI7QUFBQSxVQUNxQ0MsUUFEckMsZUFDcUNBLFFBRHJDOztBQUFBLGlCQUVrQkQsVUFBVSxJQUFJLEVBRmhDO0FBQUEsOEJBRUNYLE9BRkQ7QUFBQSxVQUVDQSxPQUZELDZCQUVXLEVBRlg7O0FBSVAsYUFDRTtBQUFLLFFBQUEsU0FBUyxFQUFHWSxRQUFRLENBQUNDO0FBQTFCLFNBQ0U7QUFBSSxRQUFBLFNBQVMsRUFBQztBQUFkLFNBRUliLE9BQU8sQ0FBQ2MsS0FBUixDQUFjQyxHQUFkLENBQWtCLFVBQUNELEtBQUQsRUFBUUUsS0FBUjtBQUFBLGVBQ2hCO0FBQUksVUFBQSxHQUFHLEVBQUdBO0FBQVYsV0FFSSxVQUFVQyxJQUFWLENBQWVILEtBQUssQ0FBQ1AsR0FBckIsSUFDRSw2QkFBQyxxQkFBRDtBQUNFLFVBQUEsR0FBRyxFQUFHTyxLQUFLLENBQUNJLE9BRGQ7QUFFRSxVQUFBLEdBQUcsRUFBR0osS0FBSyxDQUFDUDtBQUZkLFVBREYsR0FNRSw2QkFBQyxxQkFBRDtBQUNFLFVBQUEsR0FBRyxFQUFHTyxLQUFLLENBQUNJLE9BRGQ7QUFFRSxVQUFBLEdBQUcsRUFBR0osS0FBSyxDQUFDUDtBQUZkLFVBUk4sQ0FEZ0I7QUFBQSxPQUFsQixDQUZKLENBREYsRUFxQkUsNkJBQUMsbUJBQUQ7QUFDRSxRQUFBLGFBQWEsRUFBR1IsYUFEbEI7QUFFRSxRQUFBLFVBQVUsRUFBR1k7QUFGZixRQXJCRixDQURGO0FBNEJEOzs7O0VBL0NtQ1EsZUFBTUMsUzs7ZUFrRDdCLCtCQUNiO0FBQUEsTUFBR1IsUUFBSCxTQUFHQSxRQUFIO0FBQUEsU0FBbUI7QUFBRUEsSUFBQUEsUUFBUSxFQUFSQTtBQUFGLEdBQW5CO0FBQUEsQ0FEYSxFQUViaEIsdUJBRmEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtZW1vaXplIGZyb20gJ21lbW9pemUtb25lJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEFkYXB0aXZlQ2FyZEJ1aWxkZXIgfSBmcm9tICcuLi9VdGlscy9BZGFwdGl2ZUNhcmRCdWlsZGVyJztcbmltcG9ydCBDb21tb25DYXJkIGZyb20gJy4vQ29tbW9uQ2FyZCc7XG5pbXBvcnQgY29ubmVjdFRvV2ViQ2hhdCBmcm9tICcuLi9jb25uZWN0VG9XZWJDaGF0JztcbmltcG9ydCBJbWFnZUNvbnRlbnQgZnJvbSAnLi9JbWFnZUNvbnRlbnQnO1xuaW1wb3J0IFZpZGVvQ29udGVudCBmcm9tICcuL1ZpZGVvQ29udGVudCc7XG5cbmNsYXNzIEFuaW1hdGlvbkNhcmRBdHRhY2htZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLmJ1aWxkQ2FyZCA9IG1lbW9pemUoKGFkYXB0aXZlQ2FyZHMsIGNvbnRlbnQpID0+IHtcbiAgICAgIGNvbnN0IGJ1aWxkZXIgPSBuZXcgQWRhcHRpdmVDYXJkQnVpbGRlcihhZGFwdGl2ZUNhcmRzKTtcblxuICAgICAgKGNvbnRlbnQuaW1hZ2VzIHx8IFtdKS5mb3JFYWNoKGltYWdlID0+IGJ1aWxkZXIuYWRkSW1hZ2UoaW1hZ2UudXJsLCBudWxsLCBpbWFnZS50YXApKTtcblxuICAgICAgYnVpbGRlci5hZGRDb21tb24oY29udGVudCk7XG5cbiAgICAgIHJldHVybiBidWlsZGVyLmNhcmQ7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBwcm9wczogeyBhZGFwdGl2ZUNhcmRzLCBhdHRhY2htZW50LCBzdHlsZVNldCB9IH0gPSB0aGlzO1xuICAgIGNvbnN0IHsgY29udGVudCA9IHt9IH0gPSBhdHRhY2htZW50IHx8IHt9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXsgc3R5bGVTZXQuYW5pbWF0aW9uQ2FyZEF0dGFjaG1lbnQgfT5cbiAgICAgICAgPHVsIGNsYXNzTmFtZT1cIm1lZGlhLWxpc3RcIj5cbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb250ZW50Lm1lZGlhLm1hcCgobWVkaWEsIGluZGV4KSA9PlxuICAgICAgICAgICAgICA8bGkga2V5PXsgaW5kZXggfT5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAvXFwuZ2lmJC9pLnRlc3QobWVkaWEudXJsKSA/XG4gICAgICAgICAgICAgICAgICAgIDxJbWFnZUNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICBhbHQ9eyBtZWRpYS5wcm9maWxlIH1cbiAgICAgICAgICAgICAgICAgICAgICBzcmM9eyBtZWRpYS51cmwgfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICA8VmlkZW9Db250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgYWx0PXsgbWVkaWEucHJvZmlsZSB9XG4gICAgICAgICAgICAgICAgICAgICAgc3JjPXsgbWVkaWEudXJsIH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICA8L3VsPlxuICAgICAgICA8Q29tbW9uQ2FyZFxuICAgICAgICAgIGFkYXB0aXZlQ2FyZHM9eyBhZGFwdGl2ZUNhcmRzIH1cbiAgICAgICAgICBhdHRhY2htZW50PXsgYXR0YWNobWVudCB9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RUb1dlYkNoYXQoXG4gICh7IHN0eWxlU2V0IH0pID0+ICh7IHN0eWxlU2V0IH0pXG4pKEFuaW1hdGlvbkNhcmRBdHRhY2htZW50KVxuIl19