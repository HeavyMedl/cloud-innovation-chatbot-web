"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = observableToPromise;

function observableToPromise(observable) {
  return new Promise(function (resolve, reject) {
    var subscription = observable.subscribe(function (sessionId) {
      resolve(sessionId); // HACK: Sometimes, the call complete asynchronously and we cannot unsubscribe
      //       Need to wait some short time here to make sure the subscription variable has setup

      setImmediate(function () {
        return subscription.unsubscribe();
      });
    }, function (error) {
      reject(error);
      setImmediate(function () {
        return subscription.unsubscribe();
      });
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9VdGlscy9vYnNlcnZhYmxlVG9Qcm9taXNlLmpzIl0sIm5hbWVzIjpbIm9ic2VydmFibGVUb1Byb21pc2UiLCJvYnNlcnZhYmxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpYmUiLCJzZXNzaW9uSWQiLCJzZXRJbW1lZGlhdGUiLCJ1bnN1YnNjcmliZSIsImVycm9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWUsU0FBU0EsbUJBQVQsQ0FBNkJDLFVBQTdCLEVBQXlDO0FBQ3RELFNBQU8sSUFBSUMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0QyxRQUFNQyxZQUFZLEdBQUdKLFVBQVUsQ0FBQ0ssU0FBWCxDQUFxQixVQUFBQyxTQUFTLEVBQUk7QUFDckRKLE1BQUFBLE9BQU8sQ0FBQ0ksU0FBRCxDQUFQLENBRHFELENBR3JEO0FBQ0E7O0FBQ0FDLE1BQUFBLFlBQVksQ0FBQztBQUFBLGVBQU1ILFlBQVksQ0FBQ0ksV0FBYixFQUFOO0FBQUEsT0FBRCxDQUFaO0FBQ0QsS0FOb0IsRUFNbEIsVUFBQUMsS0FBSyxFQUFJO0FBQ1ZOLE1BQUFBLE1BQU0sQ0FBQ00sS0FBRCxDQUFOO0FBQ0FGLE1BQUFBLFlBQVksQ0FBQztBQUFBLGVBQU1ILFlBQVksQ0FBQ0ksV0FBYixFQUFOO0FBQUEsT0FBRCxDQUFaO0FBQ0QsS0FUb0IsQ0FBckI7QUFVRCxHQVhNLENBQVA7QUFZRCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9ic2VydmFibGVUb1Byb21pc2Uob2JzZXJ2YWJsZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKHNlc3Npb25JZCA9PiB7XG4gICAgICByZXNvbHZlKHNlc3Npb25JZCk7XG5cbiAgICAgIC8vIEhBQ0s6IFNvbWV0aW1lcywgdGhlIGNhbGwgY29tcGxldGUgYXN5bmNocm9ub3VzbHkgYW5kIHdlIGNhbm5vdCB1bnN1YnNjcmliZVxuICAgICAgLy8gICAgICAgTmVlZCB0byB3YWl0IHNvbWUgc2hvcnQgdGltZSBoZXJlIHRvIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIHZhcmlhYmxlIGhhcyBzZXR1cFxuICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpKTtcbiAgICB9LCBlcnJvciA9PiB7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpKTtcbiAgICB9KTtcbiAgfSk7XG59XG4iXX0=