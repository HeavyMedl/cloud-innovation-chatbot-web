"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

function setTimeoutOrSync(fn, ms) {
  if (ms > 0) {
    return setTimeout(fn, ms);
  } else {
    fn();
  }
}

function _default(fn) {
  var ms = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;
  var scheduled;
  var lastCall = 0;
  var nextArguments;
  return function () {
    nextArguments = arguments;

    if (!scheduled) {
      scheduled = setTimeoutOrSync(function () {
        lastCall = Date.now();
        fn.apply(null, nextArguments);
        scheduled = null;
      }, lastCall + ms - Date.now());
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9VdGlscy9kZWJvdW5jZS5qcyJdLCJuYW1lcyI6WyJzZXRUaW1lb3V0T3JTeW5jIiwiZm4iLCJtcyIsInNldFRpbWVvdXQiLCJzY2hlZHVsZWQiLCJsYXN0Q2FsbCIsIm5leHRBcmd1bWVudHMiLCJhcmd1bWVudHMiLCJEYXRlIiwibm93IiwiYXBwbHkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxTQUFTQSxnQkFBVCxDQUEwQkMsRUFBMUIsRUFBOEJDLEVBQTlCLEVBQWtDO0FBQ2hDLE1BQUlBLEVBQUUsR0FBRyxDQUFULEVBQVk7QUFDVixXQUFPQyxVQUFVLENBQUNGLEVBQUQsRUFBS0MsRUFBTCxDQUFqQjtBQUNELEdBRkQsTUFFTztBQUNMRCxJQUFBQSxFQUFFO0FBQ0g7QUFDRjs7QUFFYyxrQkFBVUEsRUFBVixFQUF5QjtBQUFBLE1BQVhDLEVBQVcsdUVBQU4sSUFBTTtBQUN0QyxNQUFJRSxTQUFKO0FBQ0EsTUFBSUMsUUFBUSxHQUFHLENBQWY7QUFDQSxNQUFJQyxhQUFKO0FBRUEsU0FBTyxZQUFZO0FBQ2pCQSxJQUFBQSxhQUFhLEdBQUdDLFNBQWhCOztBQUVBLFFBQUksQ0FBQ0gsU0FBTCxFQUFnQjtBQUNkQSxNQUFBQSxTQUFTLEdBQUdKLGdCQUFnQixDQUFDLFlBQU07QUFDakNLLFFBQUFBLFFBQVEsR0FBR0csSUFBSSxDQUFDQyxHQUFMLEVBQVg7QUFDQVIsUUFBQUEsRUFBRSxDQUFDUyxLQUFILENBQVMsSUFBVCxFQUFlSixhQUFmO0FBQ0FGLFFBQUFBLFNBQVMsR0FBRyxJQUFaO0FBQ0QsT0FKMkIsRUFJekJDLFFBQVEsR0FBR0gsRUFBWCxHQUFnQk0sSUFBSSxDQUFDQyxHQUFMLEVBSlMsQ0FBNUI7QUFLRDtBQUNGLEdBVkQ7QUFXRCIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNldFRpbWVvdXRPclN5bmMoZm4sIG1zKSB7XG4gIGlmIChtcyA+IDApIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChmbiwgbXMpO1xuICB9IGVsc2Uge1xuICAgIGZuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZuLCBtcyA9IDEwMDApIHtcbiAgbGV0IHNjaGVkdWxlZDtcbiAgbGV0IGxhc3RDYWxsID0gMDtcbiAgbGV0IG5leHRBcmd1bWVudHM7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBuZXh0QXJndW1lbnRzID0gYXJndW1lbnRzO1xuXG4gICAgaWYgKCFzY2hlZHVsZWQpIHtcbiAgICAgIHNjaGVkdWxlZCA9IHNldFRpbWVvdXRPclN5bmMoKCkgPT4ge1xuICAgICAgICBsYXN0Q2FsbCA9IERhdGUubm93KCk7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIG5leHRBcmd1bWVudHMpO1xuICAgICAgICBzY2hlZHVsZWQgPSBudWxsO1xuICAgICAgfSwgbGFzdENhbGwgKyBtcyAtIERhdGUubm93KCkpO1xuICAgIH1cbiAgfTtcbn1cbiJdfQ==