"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AdaptiveCardBuilder = void 0;

var _adaptivecards = require("adaptivecards");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function addCardAction(cardAction, includesOAuthButtons) {
  var type = cardAction.type;

  if (type === 'imBack' || type === 'messageBack' || type === 'postBack' || type === 'signin' && includesOAuthButtons) {
    var action = new _adaptivecards.SubmitAction();
    action.data = {
      __isBotFrameworkCardAction: true,
      cardAction: cardAction
    };
    action.title = cardAction.title;
    return action;
  } else {
    var _action = new _adaptivecards.OpenUrlAction();

    _action.title = cardAction.title;
    _action.url = cardAction.type === 'call' ? 'tel:' + cardAction.value : cardAction.value;
    return _action;
  }
}

var AdaptiveCardBuilder =
/*#__PURE__*/
function () {
  function AdaptiveCardBuilder(adaptiveCards) {
    _classCallCheck(this, AdaptiveCardBuilder);

    _defineProperty(this, "card", void 0);

    _defineProperty(this, "container", void 0);

    this.card = new adaptiveCards.AdaptiveCard();
    this.container = new _adaptivecards.Container();
    this.card.addItem(this.container);
  }

  _createClass(AdaptiveCardBuilder, [{
    key: "addColumnSet",
    value: function addColumnSet(sizes) {
      var container = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.container;
      var columnSet = new _adaptivecards.ColumnSet();
      container.addItem(columnSet);
      return sizes.map(function (size) {
        var column = new _adaptivecards.Column();
        column.width = _adaptivecards.SizeAndUnit.parse(size);
        columnSet.addColumn(column);
        return column;
      });
    }
  }, {
    key: "addItems",
    value: function addItems(cardElements) {
      var container = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.container;
      cardElements.forEach(function (cardElement) {
        return container.addItem(cardElement);
      });
    }
  }, {
    key: "addTextBlock",
    value: function addTextBlock(text, template) {
      var container = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.container;

      if (typeof text !== 'undefined') {
        var textblock = new _adaptivecards.TextBlock(); // tslint:disable-next-line:forin

        for (var prop in template) {
          textblock[prop] = template[prop];
        }

        textblock.speak = text;
        textblock.text = text;
        container.addItem(textblock);
      }
    }
  }, {
    key: "addButtons",
    value: function addButtons(cardActions, includesOAuthButtons) {
      var _this = this;

      cardActions && cardActions.forEach(function (cardAction) {
        _this.card.addAction(addCardAction(cardAction, includesOAuthButtons));
      });
    }
  }, {
    key: "addCommonHeaders",
    value: function addCommonHeaders(content) {
      this.addTextBlock(content.title, {
        size: _adaptivecards.TextSize.Medium,
        weight: _adaptivecards.TextWeight.Bolder
      });
      this.addTextBlock(content.subtitle, {
        isSubtle: true,
        wrap: true
      });
      this.addTextBlock(content.text, {
        wrap: true
      });
    }
  }, {
    key: "addCommon",
    value: function addCommon(content) {
      this.addCommonHeaders(content);
      this.addButtons(content.buttons);
    }
  }, {
    key: "addImage",
    value: function addImage(url, container, selectAction) {
      container = container || this.container;
      var image = new _adaptivecards.Image();
      image.url = url;
      image.selectAction = selectAction && addCardAction(selectAction);
      image.size = _adaptivecards.Size.Stretch;
      container.addItem(image);
    }
  }]);

  return AdaptiveCardBuilder;
}();

exports.AdaptiveCardBuilder = AdaptiveCardBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9VdGlscy9BZGFwdGl2ZUNhcmRCdWlsZGVyLnRzIl0sIm5hbWVzIjpbImFkZENhcmRBY3Rpb24iLCJjYXJkQWN0aW9uIiwiaW5jbHVkZXNPQXV0aEJ1dHRvbnMiLCJ0eXBlIiwiYWN0aW9uIiwiU3VibWl0QWN0aW9uIiwiZGF0YSIsIl9faXNCb3RGcmFtZXdvcmtDYXJkQWN0aW9uIiwidGl0bGUiLCJPcGVuVXJsQWN0aW9uIiwidXJsIiwidmFsdWUiLCJBZGFwdGl2ZUNhcmRCdWlsZGVyIiwiYWRhcHRpdmVDYXJkcyIsImNhcmQiLCJBZGFwdGl2ZUNhcmQiLCJjb250YWluZXIiLCJDb250YWluZXIiLCJhZGRJdGVtIiwic2l6ZXMiLCJjb2x1bW5TZXQiLCJDb2x1bW5TZXQiLCJtYXAiLCJzaXplIiwiY29sdW1uIiwiQ29sdW1uIiwid2lkdGgiLCJTaXplQW5kVW5pdCIsInBhcnNlIiwiYWRkQ29sdW1uIiwiY2FyZEVsZW1lbnRzIiwiZm9yRWFjaCIsImNhcmRFbGVtZW50IiwidGV4dCIsInRlbXBsYXRlIiwidGV4dGJsb2NrIiwiVGV4dEJsb2NrIiwicHJvcCIsInNwZWFrIiwiY2FyZEFjdGlvbnMiLCJhZGRBY3Rpb24iLCJjb250ZW50IiwiYWRkVGV4dEJsb2NrIiwiVGV4dFNpemUiLCJNZWRpdW0iLCJ3ZWlnaHQiLCJUZXh0V2VpZ2h0IiwiQm9sZGVyIiwic3VidGl0bGUiLCJpc1N1YnRsZSIsIndyYXAiLCJhZGRDb21tb25IZWFkZXJzIiwiYWRkQnV0dG9ucyIsImJ1dHRvbnMiLCJzZWxlY3RBY3Rpb24iLCJpbWFnZSIsIkltYWdlIiwiU2l6ZSIsIlN0cmV0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7Ozs7OztBQXVCQSxTQUFTQSxhQUFULENBQXVCQyxVQUF2QixFQUErQ0Msb0JBQS9DLEVBQStFO0FBQUEsTUFDckVDLElBRHFFLEdBQzVERixVQUQ0RCxDQUNyRUUsSUFEcUU7O0FBRTdFLE1BQ0VBLElBQUksS0FBSyxR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YSxDQUFDQyxVQUFELEVBQWFDLG9CQUFiLENBQWpDO0FBQ0QsT0FGYyxDQUFmO0FBR0Q7OztxQ0FFZ0J1QyxPLEVBQXlCO0FBQ3hDLFdBQUtDLFlBQUwsQ0FBa0JELE9BQU8sQ0FBQ2pDLEtBQTFCLEVBQWlDO0FBQUVlLFFBQUFBLElBQUksRUFBRW9CLHdCQUFTQyxNQUFqQjtBQUF5QkMsUUFBQUEsTUFBTSxFQUFFQywwQkFBV0M7QUFBNUMsT0FBakM7QUFDQSxXQUFLTCxZQUFMLENBQWtCRCxPQUFPLENBQUNPLFFBQTFCLEVBQW9DO0FBQUVDLFFBQUFBLFFBQVEsRUFBRSxJQUFaO0FBQWtCQyxRQUFBQSxJQUFJLEVBQUU7QUFBeEIsT0FBcEM7QUFDQSxXQUFLUixZQUFMLENBQWtCRCxPQUFPLENBQUNSLElBQTFCLEVBQWdDO0FBQUVpQixRQUFBQSxJQUFJLEVBQUU7QUFBUixPQUFoQztBQUNEOzs7OEJBRVNULE8sRUFBeUI7QUFDakMsV0FBS1UsZ0JBQUwsQ0FBc0JWLE9BQXRCO0FBQ0EsV0FBS1csVUFBTCxDQUFnQlgsT0FBTyxDQUFDWSxPQUF4QjtBQUNEOzs7NkJBRVEzQyxHLEVBQWFNLFMsRUFBdUJzQyxZLEVBQTJCO0FBQ3RFdEMsTUFBQUEsU0FBUyxHQUFHQSxTQUFTLElBQUksS0FBS0EsU0FBOUI7QUFFQSxVQUFNdUMsS0FBSyxHQUFHLElBQUlDLG9CQUFKLEVBQWQ7QUFFQUQsTUFBQUEsS0FBSyxDQUFDN0MsR0FBTixHQUFZQSxHQUFaO0FBQ0E2QyxNQUFBQSxLQUFLLENBQUNELFlBQU4sR0FBcUJBLFlBQVksSUFBSXRELGFBQWEsQ0FBQ3NELFlBQUQsQ0FBbEQ7QUFDQUMsTUFBQUEsS0FBSyxDQUFDaEMsSUFBTixHQUFha0Msb0JBQUtDLE9BQWxCO0FBRUExQyxNQUFBQSxTQUFTLENBQUNFLE9BQVYsQ0FBa0JxQyxLQUFsQjtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWRhcHRpdmVDYXJkLFxuICBDYXJkRWxlbWVudCxcbiAgQ29sdW1uLFxuICBDb2x1bW5TZXQsXG4gIENvbnRhaW5lcixcbiAgSW1hZ2UsXG4gIE9wZW5VcmxBY3Rpb24sXG4gIFNpemUsXG4gIFNpemVBbmRVbml0LFxuICBTdWJtaXRBY3Rpb24sXG4gIFRleHRCbG9jayxcbiAgVGV4dFNpemUsXG4gIFRleHRXZWlnaHRcbn0gZnJvbSAnYWRhcHRpdmVjYXJkcyc7XG5cbmltcG9ydCB7IENhcmRBY3Rpb24gfSBmcm9tICdib3RmcmFtZXdvcmstZGlyZWN0bGluZWpzJztcblxuZXhwb3J0IGludGVyZmFjZSBCb3RGcmFtZXdvcmtDYXJkQWN0aW9uIHtcbiAgX19pc0JvdEZyYW1ld29ya0NhcmRBY3Rpb246IGJvb2xlYW47XG4gIGNhcmRBY3Rpb246IENhcmRBY3Rpb247XG59XG5cbmZ1bmN0aW9uIGFkZENhcmRBY3Rpb24oY2FyZEFjdGlvbjogQ2FyZEFjdGlvbiwgaW5jbHVkZXNPQXV0aEJ1dHRvbnM/OiBib29sZWFuKSB7XG4gIGNvbnN0IHsgdHlwZSB9ID0gY2FyZEFjdGlvbjtcbiAgaWYgKFxuICAgIHR5cGUgPT09ICdpbUJhY2snXG4gICAgfHwgdHlwZSA9PT0gJ21lc3NhZ2VCYWNrJ1xuICAgIHx8IHR5cGUgPT09ICdwb3N0QmFjaydcbiAgICB8fCAodHlwZSA9PT0gJ3NpZ25pbicgJiYgaW5jbHVkZXNPQXV0aEJ1dHRvbnMpXG4gICkge1xuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBTdWJtaXRBY3Rpb24oKTtcblxuICAgIGFjdGlvbi5kYXRhID0ge1xuICAgICAgX19pc0JvdEZyYW1ld29ya0NhcmRBY3Rpb246IHRydWUsXG4gICAgICBjYXJkQWN0aW9uXG4gICAgfTtcblxuICAgIGFjdGlvbi50aXRsZSA9IGNhcmRBY3Rpb24udGl0bGU7XG5cbiAgICByZXR1cm4gYWN0aW9uO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBPcGVuVXJsQWN0aW9uKCk7XG5cbiAgICBhY3Rpb24udGl0bGUgPSBjYXJkQWN0aW9uLnRpdGxlO1xuICAgIGFjdGlvbi51cmwgPSBjYXJkQWN0aW9uLnR5cGUgPT09ICdjYWxsJyA/ICd0ZWw6JyArIGNhcmRBY3Rpb24udmFsdWUgOiBjYXJkQWN0aW9uLnZhbHVlO1xuXG4gICAgcmV0dXJuIGFjdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQWRhcHRpdmVDYXJkQnVpbGRlciB7XG4gIGNhcmQ6IEFkYXB0aXZlQ2FyZDtcbiAgY29udGFpbmVyOiBDb250YWluZXI7XG5cbiAgY29uc3RydWN0b3IoYWRhcHRpdmVDYXJkcykge1xuICAgIHRoaXMuY2FyZCA9IG5ldyBhZGFwdGl2ZUNhcmRzLkFkYXB0aXZlQ2FyZCgpO1xuICAgIHRoaXMuY29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpO1xuXG4gICAgdGhpcy5jYXJkLmFkZEl0ZW0odGhpcy5jb250YWluZXIpO1xuICB9XG5cbiAgYWRkQ29sdW1uU2V0KHNpemVzOiBudW1iZXJbXSwgY29udGFpbmVyOiBDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcikge1xuICAgIGNvbnN0IGNvbHVtblNldCA9IG5ldyBDb2x1bW5TZXQoKTtcblxuICAgIGNvbnRhaW5lci5hZGRJdGVtKGNvbHVtblNldCk7XG5cbiAgICByZXR1cm4gc2l6ZXMubWFwKHNpemUgPT4ge1xuICAgICAgY29uc3QgY29sdW1uID0gbmV3IENvbHVtbigpO1xuXG4gICAgICBjb2x1bW4ud2lkdGggPSBTaXplQW5kVW5pdC5wYXJzZShzaXplKTtcblxuICAgICAgY29sdW1uU2V0LmFkZENvbHVtbihjb2x1bW4pO1xuXG4gICAgICByZXR1cm4gY29sdW1uO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbXMoY2FyZEVsZW1lbnRzOiBDYXJkRWxlbWVudFtdLCBjb250YWluZXI6IENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyKSB7XG4gICAgY2FyZEVsZW1lbnRzLmZvckVhY2goY2FyZEVsZW1lbnQgPT4gY29udGFpbmVyLmFkZEl0ZW0oY2FyZEVsZW1lbnQpKTtcbiAgfVxuXG4gIGFkZFRleHRCbG9jayh0ZXh0OiBzdHJpbmcsIHRlbXBsYXRlOiBQYXJ0aWFsPFRleHRCbG9jaz4sIGNvbnRhaW5lcjogQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIpIHtcbiAgICBpZiAodHlwZW9mIHRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCB0ZXh0YmxvY2sgPSBuZXcgVGV4dEJsb2NrKCk7XG5cbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpmb3JpblxuICAgICAgZm9yIChjb25zdCBwcm9wIGluIHRlbXBsYXRlKSB7XG4gICAgICAgICh0ZXh0YmxvY2sgYXMgYW55KVtwcm9wXSA9ICh0ZW1wbGF0ZSBhcyBhbnkpW3Byb3BdO1xuICAgICAgfVxuXG4gICAgICB0ZXh0YmxvY2suc3BlYWsgPSB0ZXh0O1xuICAgICAgdGV4dGJsb2NrLnRleHQgPSB0ZXh0O1xuICAgICAgY29udGFpbmVyLmFkZEl0ZW0odGV4dGJsb2NrKTtcbiAgICB9XG4gIH1cblxuICBhZGRCdXR0b25zKGNhcmRBY3Rpb25zOiBDYXJkQWN0aW9uW10sIGluY2x1ZGVzT0F1dGhCdXR0b25zPzogYm9vbGVhbikge1xuICAgIGNhcmRBY3Rpb25zICYmIGNhcmRBY3Rpb25zLmZvckVhY2goY2FyZEFjdGlvbiA9PiB7XG4gICAgICB0aGlzLmNhcmQuYWRkQWN0aW9uKGFkZENhcmRBY3Rpb24oY2FyZEFjdGlvbiwgaW5jbHVkZXNPQXV0aEJ1dHRvbnMpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZENvbW1vbkhlYWRlcnMoY29udGVudDogSUNvbW1vbkNvbnRlbnQpIHtcbiAgICB0aGlzLmFkZFRleHRCbG9jayhjb250ZW50LnRpdGxlLCB7IHNpemU6IFRleHRTaXplLk1lZGl1bSwgd2VpZ2h0OiBUZXh0V2VpZ2h0LkJvbGRlciB9KTtcbiAgICB0aGlzLmFkZFRleHRCbG9jayhjb250ZW50LnN1YnRpdGxlLCB7IGlzU3VidGxlOiB0cnVlLCB3cmFwOiB0cnVlIH0pO1xuICAgIHRoaXMuYWRkVGV4dEJsb2NrKGNvbnRlbnQudGV4dCwgeyB3cmFwOiB0cnVlIH0pO1xuICB9XG5cbiAgYWRkQ29tbW9uKGNvbnRlbnQ6IElDb21tb25Db250ZW50KSB7XG4gICAgdGhpcy5hZGRDb21tb25IZWFkZXJzKGNvbnRlbnQpO1xuICAgIHRoaXMuYWRkQnV0dG9ucyhjb250ZW50LmJ1dHRvbnMpO1xuICB9XG5cbiAgYWRkSW1hZ2UodXJsOiBzdHJpbmcsIGNvbnRhaW5lcj86IENvbnRhaW5lciwgc2VsZWN0QWN0aW9uPzogQ2FyZEFjdGlvbikge1xuICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCB0aGlzLmNvbnRhaW5lcjtcblxuICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG5cbiAgICBpbWFnZS51cmwgPSB1cmw7XG4gICAgaW1hZ2Uuc2VsZWN0QWN0aW9uID0gc2VsZWN0QWN0aW9uICYmIGFkZENhcmRBY3Rpb24oc2VsZWN0QWN0aW9uKTtcbiAgICBpbWFnZS5zaXplID0gU2l6ZS5TdHJldGNoO1xuXG4gICAgY29udGFpbmVyLmFkZEl0ZW0oaW1hZ2UpO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1vbkNvbnRlbnQge1xuICBidXR0b25zPzogQ2FyZEFjdGlvbltdO1xuICBzdWJ0aXRsZT86IHN0cmluZztcbiAgdGV4dD86IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG59XG4iXX0=