"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.connectSuggestedActions = exports.default = void 0;

var _reactFilm = _interopRequireDefault(require("react-film"));

var _classnames = _interopRequireDefault(require("classnames"));

var _react = _interopRequireDefault(require("react"));

var _connectToWebChat = _interopRequireDefault(require("../connectToWebChat"));

var _SuggestedAction = _interopRequireDefault(require("./SuggestedAction"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function suggestedActionText(_ref) {
  var displayText = _ref.displayText,
      title = _ref.title,
      type = _ref.type,
      value = _ref.value;

  if (type === 'messageBack') {
    return title || displayText;
  } else if (title) {
    return title;
  } else if (typeof value === 'string') {
    return value;
  } else {
    return JSON.stringify(value);
  }
}

var connectSuggestedActions = function connectSuggestedActions() {
  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(void 0, [function (_ref2) {
    var language = _ref2.language,
        suggestedActions = _ref2.suggestedActions;
    return {
      language: language,
      suggestedActions: suggestedActions
    };
  }].concat(selectors));
};

exports.connectSuggestedActions = connectSuggestedActions;

var _default = connectSuggestedActions(function (_ref3) {
  var styleSet = _ref3.styleSet;
  return {
    styleSet: styleSet
  };
})(function (_ref4) {
  var className = _ref4.className,
      styleSet = _ref4.styleSet,
      suggestedActions = _ref4.suggestedActions;
  return !!suggestedActions.length && _react.default.createElement(_reactFilm.default, {
    autoCenter: false,
    className: (0, _classnames.default)(styleSet.suggestedActions + '', className),
    showDots: false,
    styleSet: styleSet.options.suggestedActionsStyleSet
  }, suggestedActions.map(function (_ref5, index) {
    var displayText = _ref5.displayText,
        image = _ref5.image,
        text = _ref5.text,
        title = _ref5.title,
        type = _ref5.type,
        value = _ref5.value;
    return _react.default.createElement(_SuggestedAction.default, {
      buttonText: suggestedActionText({
        displayText: displayText,
        title: title,
        type: type,
        value: value
      }),
      displayText: displayText,
      image: image,
      key: index,
      text: text,
      type: type,
      value: value
    });
  }));
});

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TZW5kQm94L1N1Z2dlc3RlZEFjdGlvbnMuanMiXSwibmFtZXMiOlsic3VnZ2VzdGVkQWN0aW9uVGV4dCIsImRpc3BsYXlUZXh0IiwidGl0bGUiLCJ0eXBlIiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwiY29ubmVjdFN1Z2dlc3RlZEFjdGlvbnMiLCJzZWxlY3RvcnMiLCJjb25uZWN0VG9XZWJDaGF0IiwibGFuZ3VhZ2UiLCJzdWdnZXN0ZWRBY3Rpb25zIiwic3R5bGVTZXQiLCJjbGFzc05hbWUiLCJsZW5ndGgiLCJvcHRpb25zIiwic3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0IiwibWFwIiwiaW5kZXgiLCJpbWFnZSIsInRleHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7OztBQUVBLFNBQVNBLG1CQUFULE9BQWtFO0FBQUEsTUFBbkNDLFdBQW1DLFFBQW5DQSxXQUFtQztBQUFBLE1BQXRCQyxLQUFzQixRQUF0QkEsS0FBc0I7QUFBQSxNQUFmQyxJQUFlLFFBQWZBLElBQWU7QUFBQSxNQUFUQyxLQUFTLFFBQVRBLEtBQVM7O0FBQ2hFLE1BQUlELElBQUksS0FBSyxhQUFiLEVBQTRCO0FBQzFCLFdBQU9ELEtBQUssSUFBSUQsV0FBaEI7QUFDRCxHQUZELE1BRU8sSUFBSUMsS0FBSixFQUFXO0FBQ2hCLFdBQU9BLEtBQVA7QUFDRCxHQUZNLE1BRUEsSUFBSSxPQUFPRSxLQUFQLEtBQWlCLFFBQXJCLEVBQStCO0FBQ3BDLFdBQU9BLEtBQVA7QUFDRCxHQUZNLE1BRUE7QUFDTCxXQUFPQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUYsS0FBZixDQUFQO0FBQ0Q7QUFDRjs7QUFFRCxJQUFNRyx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQTBCO0FBQUEsb0NBQUlDLFNBQUo7QUFBSUEsSUFBQUEsU0FBSjtBQUFBOztBQUFBLFNBQWtCQyx5Q0FDaEQ7QUFBQSxRQUNFQyxRQURGLFNBQ0VBLFFBREY7QUFBQSxRQUVFQyxnQkFGRixTQUVFQSxnQkFGRjtBQUFBLFdBR087QUFDTEQsTUFBQUEsUUFBUSxFQUFSQSxRQURLO0FBRUxDLE1BQUFBLGdCQUFnQixFQUFoQkE7QUFGSyxLQUhQO0FBQUEsR0FEZ0QsU0FRN0NILFNBUjZDLEVBQWxCO0FBQUEsQ0FBaEM7Ozs7ZUFXZUQsdUJBQXVCLENBQ3BDO0FBQUEsTUFBR0ssUUFBSCxTQUFHQSxRQUFIO0FBQUEsU0FBbUI7QUFBRUEsSUFBQUEsUUFBUSxFQUFSQTtBQUFGLEdBQW5CO0FBQUEsQ0FEb0MsQ0FBdkIsQ0FFYjtBQUFBLE1BQ0FDLFNBREEsU0FDQUEsU0FEQTtBQUFBLE1BRUFELFFBRkEsU0FFQUEsUUFGQTtBQUFBLE1BR0FELGdCQUhBLFNBR0FBLGdCQUhBO0FBQUEsU0FLQSxDQUFDLENBQUNBLGdCQUFnQixDQUFDRyxNQUFuQixJQUNFLDZCQUFDLGtCQUFEO0FBQ0UsSUFBQSxVQUFVLEVBQUcsS0FEZjtBQUVFLElBQUEsU0FBUyxFQUFHLHlCQUNWRixRQUFRLENBQUNELGdCQUFULEdBQTRCLEVBRGxCLEVBRVZFLFNBRlUsQ0FGZDtBQU1FLElBQUEsUUFBUSxFQUFHLEtBTmI7QUFPRSxJQUFBLFFBQVEsRUFBR0QsUUFBUSxDQUFDRyxPQUFULENBQWlCQztBQVA5QixLQVVJTCxnQkFBZ0IsQ0FBQ00sR0FBakIsQ0FBcUIsaUJBU25CQyxLQVRtQjtBQUFBLFFBRWpCakIsV0FGaUIsU0FFakJBLFdBRmlCO0FBQUEsUUFHakJrQixLQUhpQixTQUdqQkEsS0FIaUI7QUFBQSxRQUlqQkMsSUFKaUIsU0FJakJBLElBSmlCO0FBQUEsUUFLakJsQixLQUxpQixTQUtqQkEsS0FMaUI7QUFBQSxRQU1qQkMsSUFOaUIsU0FNakJBLElBTmlCO0FBQUEsUUFPakJDLEtBUGlCLFNBT2pCQSxLQVBpQjtBQUFBLFdBV25CLDZCQUFDLHdCQUFEO0FBQ0UsTUFBQSxVQUFVLEVBQ1RKLG1CQUFtQixDQUFDO0FBQUVDLFFBQUFBLFdBQVcsRUFBWEEsV0FBRjtBQUFlQyxRQUFBQSxLQUFLLEVBQUxBLEtBQWY7QUFBc0JDLFFBQUFBLElBQUksRUFBSkEsSUFBdEI7QUFBNEJDLFFBQUFBLEtBQUssRUFBTEE7QUFBNUIsT0FBRCxDQUZ0QjtBQUlFLE1BQUEsV0FBVyxFQUFHSCxXQUpoQjtBQUtFLE1BQUEsS0FBSyxFQUFHa0IsS0FMVjtBQU1FLE1BQUEsR0FBRyxFQUFHRCxLQU5SO0FBT0UsTUFBQSxJQUFJLEVBQUdFLElBUFQ7QUFRRSxNQUFBLElBQUksRUFBR2pCLElBUlQ7QUFTRSxNQUFBLEtBQUssRUFBR0M7QUFUVixNQVhtQjtBQUFBLEdBQXJCLENBVkosQ0FORjtBQUFBLENBRmEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNpY0ZpbG0gZnJvbSAncmVhY3QtZmlsbSc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBjb25uZWN0VG9XZWJDaGF0IGZyb20gJy4uL2Nvbm5lY3RUb1dlYkNoYXQnO1xuaW1wb3J0IFN1Z2dlc3RlZEFjdGlvbiBmcm9tICcuL1N1Z2dlc3RlZEFjdGlvbic7XG5cbmZ1bmN0aW9uIHN1Z2dlc3RlZEFjdGlvblRleHQoeyBkaXNwbGF5VGV4dCwgdGl0bGUsIHR5cGUsIHZhbHVlIH0pIHtcbiAgaWYgKHR5cGUgPT09ICdtZXNzYWdlQmFjaycpIHtcbiAgICByZXR1cm4gdGl0bGUgfHwgZGlzcGxheVRleHRcbiAgfSBlbHNlIGlmICh0aXRsZSkge1xuICAgIHJldHVybiB0aXRsZTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gIH1cbn1cblxuY29uc3QgY29ubmVjdFN1Z2dlc3RlZEFjdGlvbnMgPSAoLi4uc2VsZWN0b3JzKSA9PiBjb25uZWN0VG9XZWJDaGF0KFxuICAoe1xuICAgIGxhbmd1YWdlLFxuICAgIHN1Z2dlc3RlZEFjdGlvbnNcbiAgfSkgPT4gKHtcbiAgICBsYW5ndWFnZSxcbiAgICBzdWdnZXN0ZWRBY3Rpb25zXG4gIH0pLFxuICAuLi5zZWxlY3RvcnNcbilcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdFN1Z2dlc3RlZEFjdGlvbnMoXG4gICh7IHN0eWxlU2V0IH0pID0+ICh7IHN0eWxlU2V0IH0pXG4pKCh7XG4gIGNsYXNzTmFtZSxcbiAgc3R5bGVTZXQsXG4gIHN1Z2dlc3RlZEFjdGlvbnNcbn0pID0+XG4gICEhc3VnZ2VzdGVkQWN0aW9ucy5sZW5ndGggJiZcbiAgICA8QmFzaWNGaWxtXG4gICAgICBhdXRvQ2VudGVyPXsgZmFsc2UgfVxuICAgICAgY2xhc3NOYW1lPXsgY2xhc3NOYW1lcyhcbiAgICAgICAgc3R5bGVTZXQuc3VnZ2VzdGVkQWN0aW9ucyArICcnLFxuICAgICAgICBjbGFzc05hbWVcbiAgICAgICkgfVxuICAgICAgc2hvd0RvdHM9eyBmYWxzZSB9XG4gICAgICBzdHlsZVNldD17IHN0eWxlU2V0Lm9wdGlvbnMuc3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0IH1cbiAgICA+XG4gICAgICB7XG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbnMubWFwKChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaXNwbGF5VGV4dCxcbiAgICAgICAgICAgIGltYWdlLFxuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbmRleFxuICAgICAgICApID0+XG4gICAgICAgICAgPFN1Z2dlc3RlZEFjdGlvblxuICAgICAgICAgICAgYnV0dG9uVGV4dD17XG4gICAgICAgICAgICAgc3VnZ2VzdGVkQWN0aW9uVGV4dCh7IGRpc3BsYXlUZXh0LCB0aXRsZSwgdHlwZSwgdmFsdWUgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpc3BsYXlUZXh0PXsgZGlzcGxheVRleHQgfVxuICAgICAgICAgICAgaW1hZ2U9eyBpbWFnZSB9XG4gICAgICAgICAgICBrZXk9eyBpbmRleCB9XG4gICAgICAgICAgICB0ZXh0PXsgdGV4dCB9XG4gICAgICAgICAgICB0eXBlPXsgdHlwZSB9XG4gICAgICAgICAgICB2YWx1ZT17IHZhbHVlIH1cbiAgICAgICAgICAvPlxuICAgICAgICApXG4gICAgICB9XG4gICAgPC9CYXNpY0ZpbG0+XG4pXG5cbmV4cG9ydCB7IGNvbm5lY3RTdWdnZXN0ZWRBY3Rpb25zIH1cbiJdfQ==