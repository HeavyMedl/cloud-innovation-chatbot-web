"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.connectMicrophoneButton = exports.default = void 0;

var _glamor = require("glamor");

var _classnames = _interopRequireDefault(require("classnames"));

var _react = _interopRequireDefault(require("react"));

var _botframeworkWebchatCore = require("botframework-webchat-core");

var _Localize = require("../Localization/Localize");

var _connectToWebChat = _interopRequireDefault(require("../connectToWebChat"));

var _IconButton = _interopRequireDefault(require("./IconButton"));

var _MicrophoneIcon = _interopRequireDefault(require("./Assets/MicrophoneIcon"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DictateState = _botframeworkWebchatCore.Constants.DictateState;
var ROOT_CSS = (0, _glamor.css)({
  display: 'flex',
  '& > .sr-only': {
    color: 'transparent',
    height: 1,
    left: -10000,
    overflow: 'hidden',
    position: 'absolute',
    top: 'auto',
    width: 1
  }
});

var connectMicrophoneButton = function connectMicrophoneButton() {
  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(void 0, [function (_ref) {
    var disabled = _ref.disabled,
        dictateState = _ref.dictateState,
        language = _ref.language,
        startDictate = _ref.startDictate,
        stopDictate = _ref.stopDictate;
    return {
      click: function click() {
        if (dictateState === DictateState.STARTING || dictateState === DictateState.DICTATING) {
          stopDictate();
        } else {
          startDictate();
        }
      },
      dictating: dictateState === DictateState.DICTATING,
      disabled: disabled || dictateState === DictateState.STARTING || dictateState === DictateState.STOPPING,
      language: language
    };
  }].concat(selectors));
};

exports.connectMicrophoneButton = connectMicrophoneButton;

var _default = connectMicrophoneButton(function (_ref2) {
  var styleSet = _ref2.styleSet;
  return {
    styleSet: styleSet
  };
})(function (_ref3) {
  var className = _ref3.className,
      click = _ref3.click,
      dictating = _ref3.dictating,
      disabled = _ref3.disabled,
      language = _ref3.language,
      styleSet = _ref3.styleSet;
  return _react.default.createElement("div", {
    "aria-controls": "webchatSendBoxMicrophoneButton",
    className: (0, _classnames.default)(styleSet.microphoneButton + '', ROOT_CSS + '', (className || '') + '', {
      dictating: dictating
    })
  }, _react.default.createElement(_IconButton.default, {
    alt: (0, _Localize.localize)('Speak', language),
    disabled: disabled,
    onClick: click
  }, _react.default.createElement(_MicrophoneIcon.default, null)), _react.default.createElement("div", {
    "aria-live": "polite",
    className: "sr-only",
    id: "webchatSendBoxMicrophoneButton",
    role: "status"
  }, (0, _Localize.localize)(dictating ? 'Microphone on' : 'Microphone off', language)));
});

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TZW5kQm94L01pY3JvcGhvbmVCdXR0b24uanMiXSwibmFtZXMiOlsiRGljdGF0ZVN0YXRlIiwiQ29uc3RhbnRzIiwiUk9PVF9DU1MiLCJkaXNwbGF5IiwiY29sb3IiLCJoZWlnaHQiLCJsZWZ0Iiwib3ZlcmZsb3ciLCJwb3NpdGlvbiIsInRvcCIsIndpZHRoIiwiY29ubmVjdE1pY3JvcGhvbmVCdXR0b24iLCJzZWxlY3RvcnMiLCJjb25uZWN0VG9XZWJDaGF0IiwiZGlzYWJsZWQiLCJkaWN0YXRlU3RhdGUiLCJsYW5ndWFnZSIsInN0YXJ0RGljdGF0ZSIsInN0b3BEaWN0YXRlIiwiY2xpY2siLCJTVEFSVElORyIsIkRJQ1RBVElORyIsImRpY3RhdGluZyIsIlNUT1BQSU5HIiwic3R5bGVTZXQiLCJjbGFzc05hbWUiLCJtaWNyb3Bob25lQnV0dG9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7SUFFUUEsWSxHQUFpQkMsa0MsQ0FBakJELFk7QUFFUixJQUFNRSxRQUFRLEdBQUcsaUJBQUk7QUFDbkJDLEVBQUFBLE9BQU8sRUFBRSxNQURVO0FBR25CLGtCQUFnQjtBQUNkQyxJQUFBQSxLQUFLLEVBQUUsYUFETztBQUVkQyxJQUFBQSxNQUFNLEVBQUUsQ0FGTTtBQUdkQyxJQUFBQSxJQUFJLEVBQUUsQ0FBQyxLQUhPO0FBSWRDLElBQUFBLFFBQVEsRUFBRSxRQUpJO0FBS2RDLElBQUFBLFFBQVEsRUFBRSxVQUxJO0FBTWRDLElBQUFBLEdBQUcsRUFBRSxNQU5TO0FBT2RDLElBQUFBLEtBQUssRUFBRTtBQVBPO0FBSEcsQ0FBSixDQUFqQjs7QUFjQSxJQUFNQyx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQTBCO0FBQUEsb0NBQUlDLFNBQUo7QUFBSUEsSUFBQUEsU0FBSjtBQUFBOztBQUFBLFNBQWtCQyx5Q0FDaEQ7QUFBQSxRQUNFQyxRQURGLFFBQ0VBLFFBREY7QUFBQSxRQUVFQyxZQUZGLFFBRUVBLFlBRkY7QUFBQSxRQUdFQyxRQUhGLFFBR0VBLFFBSEY7QUFBQSxRQUlFQyxZQUpGLFFBSUVBLFlBSkY7QUFBQSxRQUtFQyxXQUxGLFFBS0VBLFdBTEY7QUFBQSxXQU1PO0FBQ0xDLE1BQUFBLEtBQUssRUFBRSxpQkFBTTtBQUNYLFlBQUlKLFlBQVksS0FBS2YsWUFBWSxDQUFDb0IsUUFBOUIsSUFBMENMLFlBQVksS0FBS2YsWUFBWSxDQUFDcUIsU0FBNUUsRUFBdUY7QUFDckZILFVBQUFBLFdBQVc7QUFDWixTQUZELE1BRU87QUFDTEQsVUFBQUEsWUFBWTtBQUNiO0FBQ0YsT0FQSTtBQVFMSyxNQUFBQSxTQUFTLEVBQUVQLFlBQVksS0FBS2YsWUFBWSxDQUFDcUIsU0FScEM7QUFTTFAsTUFBQUEsUUFBUSxFQUFFQSxRQUFRLElBQUtDLFlBQVksS0FBS2YsWUFBWSxDQUFDb0IsUUFBOUIsSUFBMENMLFlBQVksS0FBS2YsWUFBWSxDQUFDdUIsUUFUMUY7QUFVTFAsTUFBQUEsUUFBUSxFQUFSQTtBQVZLLEtBTlA7QUFBQSxHQURnRCxTQW1CN0NKLFNBbkI2QyxFQUFsQjtBQUFBLENBQWhDOzs7O2VBc0JlRCx1QkFBdUIsQ0FDcEM7QUFBQSxNQUFHYSxRQUFILFNBQUdBLFFBQUg7QUFBQSxTQUFtQjtBQUFFQSxJQUFBQSxRQUFRLEVBQVJBO0FBQUYsR0FBbkI7QUFBQSxDQURvQyxDQUF2QixDQUdiO0FBQUEsTUFDRUMsU0FERixTQUNFQSxTQURGO0FBQUEsTUFFRU4sS0FGRixTQUVFQSxLQUZGO0FBQUEsTUFHRUcsU0FIRixTQUdFQSxTQUhGO0FBQUEsTUFJRVIsUUFKRixTQUlFQSxRQUpGO0FBQUEsTUFLRUUsUUFMRixTQUtFQSxRQUxGO0FBQUEsTUFNRVEsUUFORixTQU1FQSxRQU5GO0FBQUEsU0FRRTtBQUNFLHFCQUFjLGdDQURoQjtBQUVFLElBQUEsU0FBUyxFQUFHLHlCQUNWQSxRQUFRLENBQUNFLGdCQUFULEdBQTRCLEVBRGxCLEVBRVZ4QixRQUFRLEdBQUcsRUFGRCxFQUdWLENBQUN1QixTQUFTLElBQUksRUFBZCxJQUFvQixFQUhWLEVBSVY7QUFBRUgsTUFBQUEsU0FBUyxFQUFUQTtBQUFGLEtBSlU7QUFGZCxLQVNFLDZCQUFDLG1CQUFEO0FBQ0UsSUFBQSxHQUFHLEVBQUcsd0JBQVMsT0FBVCxFQUFrQk4sUUFBbEIsQ0FEUjtBQUVFLElBQUEsUUFBUSxFQUFHRixRQUZiO0FBR0UsSUFBQSxPQUFPLEVBQUdLO0FBSFosS0FLRSw2QkFBQyx1QkFBRCxPQUxGLENBVEYsRUFnQkU7QUFDRSxpQkFBVSxRQURaO0FBRUUsSUFBQSxTQUFTLEVBQUMsU0FGWjtBQUdFLElBQUEsRUFBRSxFQUFDLGdDQUhMO0FBSUUsSUFBQSxJQUFJLEVBQUM7QUFKUCxLQU1JLHdCQUFTRyxTQUFTLEdBQUcsZUFBSCxHQUFxQixnQkFBdkMsRUFBeUROLFFBQXpELENBTkosQ0FoQkYsQ0FSRjtBQUFBLENBSGEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ2dsYW1vcic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gJ2JvdGZyYW1ld29yay13ZWJjaGF0LWNvcmUnO1xuXG5pbXBvcnQgeyBsb2NhbGl6ZSB9IGZyb20gJy4uL0xvY2FsaXphdGlvbi9Mb2NhbGl6ZSc7XG5pbXBvcnQgY29ubmVjdFRvV2ViQ2hhdCBmcm9tICcuLi9jb25uZWN0VG9XZWJDaGF0JztcbmltcG9ydCBJY29uQnV0dG9uIGZyb20gJy4vSWNvbkJ1dHRvbic7XG5pbXBvcnQgTWljcm9waG9uZUljb24gZnJvbSAnLi9Bc3NldHMvTWljcm9waG9uZUljb24nO1xuXG5jb25zdCB7IERpY3RhdGVTdGF0ZSB9ID0gQ29uc3RhbnRzO1xuXG5jb25zdCBST09UX0NTUyA9IGNzcyh7XG4gIGRpc3BsYXk6ICdmbGV4JyxcblxuICAnJiA+IC5zci1vbmx5Jzoge1xuICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgIGhlaWdodDogMSxcbiAgICBsZWZ0OiAtMTAwMDAsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogJ2F1dG8nLFxuICAgIHdpZHRoOiAxXG4gIH1cbn0pO1xuXG5jb25zdCBjb25uZWN0TWljcm9waG9uZUJ1dHRvbiA9ICguLi5zZWxlY3RvcnMpID0+IGNvbm5lY3RUb1dlYkNoYXQoXG4gICh7XG4gICAgZGlzYWJsZWQsXG4gICAgZGljdGF0ZVN0YXRlLFxuICAgIGxhbmd1YWdlLFxuICAgIHN0YXJ0RGljdGF0ZSxcbiAgICBzdG9wRGljdGF0ZVxuICB9KSA9PiAoe1xuICAgIGNsaWNrOiAoKSA9PiB7XG4gICAgICBpZiAoZGljdGF0ZVN0YXRlID09PSBEaWN0YXRlU3RhdGUuU1RBUlRJTkcgfHwgZGljdGF0ZVN0YXRlID09PSBEaWN0YXRlU3RhdGUuRElDVEFUSU5HKSB7XG4gICAgICAgIHN0b3BEaWN0YXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydERpY3RhdGUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRpY3RhdGluZzogZGljdGF0ZVN0YXRlID09PSBEaWN0YXRlU3RhdGUuRElDVEFUSU5HLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCAoZGljdGF0ZVN0YXRlID09PSBEaWN0YXRlU3RhdGUuU1RBUlRJTkcgfHwgZGljdGF0ZVN0YXRlID09PSBEaWN0YXRlU3RhdGUuU1RPUFBJTkcpLFxuICAgIGxhbmd1YWdlXG4gIH0pLFxuICAuLi5zZWxlY3RvcnNcbik7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RNaWNyb3Bob25lQnV0dG9uKFxuICAoeyBzdHlsZVNldCB9KSA9PiAoeyBzdHlsZVNldCB9KVxuKShcbiAgKHtcbiAgICBjbGFzc05hbWUsXG4gICAgY2xpY2ssXG4gICAgZGljdGF0aW5nLFxuICAgIGRpc2FibGVkLFxuICAgIGxhbmd1YWdlLFxuICAgIHN0eWxlU2V0XG4gIH0pID0+XG4gICAgPGRpdlxuICAgICAgYXJpYS1jb250cm9scz1cIndlYmNoYXRTZW5kQm94TWljcm9waG9uZUJ1dHRvblwiXG4gICAgICBjbGFzc05hbWU9eyBjbGFzc05hbWVzKFxuICAgICAgICBzdHlsZVNldC5taWNyb3Bob25lQnV0dG9uICsgJycsXG4gICAgICAgIFJPT1RfQ1NTICsgJycsXG4gICAgICAgIChjbGFzc05hbWUgfHwgJycpICsgJycsXG4gICAgICAgIHsgZGljdGF0aW5nIH1cbiAgICAgICkgfVxuICAgID5cbiAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgIGFsdD17IGxvY2FsaXplKCdTcGVhaycsIGxhbmd1YWdlKSB9XG4gICAgICAgIGRpc2FibGVkPXsgZGlzYWJsZWQgfVxuICAgICAgICBvbkNsaWNrPXsgY2xpY2sgfVxuICAgICAgPlxuICAgICAgICA8TWljcm9waG9uZUljb24gLz5cbiAgICAgIDwvSWNvbkJ1dHRvbj5cbiAgICAgIDxkaXZcbiAgICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgICAgY2xhc3NOYW1lPVwic3Itb25seVwiXG4gICAgICAgIGlkPVwid2ViY2hhdFNlbmRCb3hNaWNyb3Bob25lQnV0dG9uXCJcbiAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICA+XG4gICAgICAgIHsgbG9jYWxpemUoZGljdGF0aW5nID8gJ01pY3JvcGhvbmUgb24nIDogJ01pY3JvcGhvbmUgb2ZmJywgbGFuZ3VhZ2UpIH1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuKVxuXG5leHBvcnQgeyBjb25uZWN0TWljcm9waG9uZUJ1dHRvbiB9XG4iXX0=