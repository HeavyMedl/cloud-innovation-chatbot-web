"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _glamor = require("glamor");

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var DOT_BOX_SIZE = 20;
var DOT_SIZE = 6;

var createDotsBoxCSS = function createDotsBoxCSS(_ref) {
  var height = _ref.height;
  return (0, _glamor.css)({
    alignItems: 'center',
    bottom: 0,
    height: height,
    justifyContent: 'center',
    width: '100%'
  });
};

var createDotsItemCSS = function createDotsItemCSS(_ref2) {
  var boxSize = _ref2.boxSize,
      cursor = _ref2.cursor,
      size = _ref2.size;
  return (0, _glamor.css)({
    alignItems: 'center',
    display: 'flex',
    height: boxSize,
    justifyContent: 'center',
    width: boxSize,
    '& > input': _objectSpread({}, cursor ? {
      cursor: cursor
    } : {}, {
      height: '100%',
      left: 0,
      margin: 0,
      opacity: 0,
      position: 'absolute',
      top: 0,
      width: '100%'
    }),
    '& > div': {
      background: 'rgba(0, 0, 0, .2)',
      borderRadius: size / 2,
      height: size,
      width: size
    },
    '&:hover > div, & > input:focus + div': {
      background: 'rgba(0, 0, 0, .4)'
    },
    '& > input:active + div': {
      background: 'rgba(0, 0, 0, .8)'
    },
    '& > input:checked:not(:active) + div': {
      background: 'rgba(0, 0, 0, .6)'
    }
  });
};

var FLIPPER_BOX_WIDTH = 60;
var FLIPPER_SIZE = 40;

var createFlipperBoxCSS = function createFlipperBoxCSS(_ref3) {
  var boxWidth = _ref3.boxWidth,
      cursor = _ref3.cursor,
      size = _ref3.size;
  return (0, _glamor.css)(_objectSpread({}, cursor ? {
    cursor: cursor
  } : {}, {
    background: 'Transparent',
    height: '100%',
    position: 'absolute',
    top: 0,
    width: boxWidth,
    '& > div.slider': {
      alignItems: 'center',
      display: 'flex',
      height: '100%',
      justifyContent: 'center',
      position: 'absolute',
      top: 0,
      width: '100%',
      '& > div': {
        backgroundColor: 'rgba(0, 0, 0, .6)',
        borderRadius: '50%',
        color: 'rgba(255, 255, 255, .6)',
        fontFamily: ['Consolas', 'monospace'].map(function (font) {
          return "'".concat(font, "'");
        }).join(', '),
        fontSize: 16,
        height: size,
        lineHeight: "".concat(size, "px"),
        transitionProperty: 'background-color',
        transitionDuration: '100ms',
        width: size
      }
    },
    '&:hover, &:focus': {
      '& > div.slider > div': {
        backgroundColor: 'rgba(0, 0, 0, .8)',
        color: 'rgba(255, 255, 255, .8)',
        transitionDuration: 0
      }
    },
    '&:active > div.slider > div': {
      backgroundColor: 'Black',
      color: 'White',
      transitionDuration: 0
    }
  }));
};

var createLeftFlipperCSS = function createLeftFlipperCSS(options) {
  return (0, _glamor.css)({
    left: 0,
    '& > div.slider': {
      left: 0
    }
  }, createFlipperBoxCSS(options));
};

var createRightFlipperCSS = function createRightFlipperCSS(options) {
  return (0, _glamor.css)({
    right: 0,
    '& > div.slider': {
      right: 0
    }
  }, createFlipperBoxCSS(options));
};

var SCROLL_BAR_HEIGHT = 8;
var SCROLL_BAR_MARGIN = 4;

var createScrollBarBoxCSS = function createScrollBarBoxCSS(_ref4) {
  var margin = _ref4.margin;
  return (0, _glamor.css)({
    bottom: 0,
    padding: margin,
    position: 'absolute',
    transitionDelay: '1s',
    transitionDuration: '300ms',
    transitionProperty: 'bottom',
    width: '100%'
  });
};

var createScrollBarHandlerCSS = function createScrollBarHandlerCSS(_ref5) {
  var height = _ref5.height;
  return (0, _glamor.css)({
    backdropFilter: 'blur(4px)',
    background: 'rgba(255, 255, 255, .4)',
    borderRadius: height / 2,
    height: height
  });
};

function _default() {
  var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      _ref6$autoHide = _ref6.autoHide,
      autoHide = _ref6$autoHide === void 0 ? true : _ref6$autoHide,
      _ref6$cursor = _ref6.cursor,
      cursor = _ref6$cursor === void 0 ? 'pointer' : _ref6$cursor,
      _ref6$dotBoxSize = _ref6.dotBoxSize,
      dotBoxSize = _ref6$dotBoxSize === void 0 ? DOT_BOX_SIZE : _ref6$dotBoxSize,
      _ref6$dotSize = _ref6.dotSize,
      dotSize = _ref6$dotSize === void 0 ? DOT_SIZE : _ref6$dotSize,
      _ref6$flipperBoxWidth = _ref6.flipperBoxWidth,
      flipperBoxWidth = _ref6$flipperBoxWidth === void 0 ? FLIPPER_BOX_WIDTH : _ref6$flipperBoxWidth,
      _ref6$flipperSize = _ref6.flipperSize,
      flipperSize = _ref6$flipperSize === void 0 ? FLIPPER_SIZE : _ref6$flipperSize,
      _ref6$scrollBarHeight = _ref6.scrollBarHeight,
      scrollBarHeight = _ref6$scrollBarHeight === void 0 ? SCROLL_BAR_HEIGHT : _ref6$scrollBarHeight,
      _ref6$scrollBarMargin = _ref6.scrollBarMargin,
      scrollBarMargin = _ref6$scrollBarMargin === void 0 ? SCROLL_BAR_MARGIN : _ref6$scrollBarMargin;

  var styles = {
    carousel: '',
    dotsBox: createDotsBoxCSS({
      height: dotBoxSize
    }),
    dotsItem: createDotsItemCSS({
      boxSize: dotBoxSize,
      cursor: cursor,
      size: dotSize
    }),
    leftFlipper: createLeftFlipperCSS({
      boxWidth: flipperBoxWidth,
      cursor: cursor,
      size: flipperSize
    }),
    rightFlipper: createRightFlipperCSS({
      boxWidth: flipperBoxWidth,
      cursor: cursor,
      size: flipperSize
    }),
    scrollBarBox: createScrollBarBoxCSS({
      margin: scrollBarMargin
    }),
    scrollBarHandler: createScrollBarHandlerCSS({
      height: scrollBarHeight
    })
  }; // This is for overriding existing rules with auto-hide CSS transitions

  if (autoHide) {
    var _hoverScrolling;

    var flipperOverrides = {
      position: 'absolute',
      top: 0,
      transitionDelay: '1s',
      transitionDuration: '300ms'
    };
    styles.leftFlipper = (0, _glamor.css)(styles.leftFlipper, {
      '& > div.slider': _objectSpread({}, flipperOverrides, {
        left: -50,
        transitionProperty: 'left'
      }),
      '&:focus > div.slider': {
        left: 0,
        transitionDelay: '0s'
      }
    });
    styles.rightFlipper = (0, _glamor.css)(styles.rightFlipper, {
      '& > div.slider': _objectSpread({}, flipperOverrides, {
        right: -50,
        transitionProperty: 'right'
      }),
      '&:focus > div.slider': {
        right: 0,
        transitionDelay: '0s'
      }
    });
    styles.scrollBarBox = (0, _glamor.css)(styles.scrollBarBox, {
      bottom: -30,
      transitionDelay: '1s',
      transitionDuration: '300ms',
      transitionProperty: 'bottom'
    }); // The auto-hide state is defined in arch-style (carousel) for its `hover` pseudo class

    styles.carousel = (0, _glamor.css)({
      '&:hover, &.scrolling': (_hoverScrolling = {}, _defineProperty(_hoverScrolling, "& .".concat(styles.scrollBarBox + '', ", & .").concat(styles.leftFlipper + '', " > div.slider, & .").concat(styles.rightFlipper + '', " > div.slider"), {
        // Controls show up as soon as the user hover on it
        transitionDelay: '0s'
      }), _defineProperty(_hoverScrolling, "& .".concat(styles.scrollBarBox + ''), {
        bottom: 0
      }), _defineProperty(_hoverScrolling, "& .".concat(styles.leftFlipper + '', " > div.slider"), {
        left: 0
      }), _defineProperty(_hoverScrolling, "& .".concat(styles.rightFlipper + '', " > div.slider"), {
        right: 0
      }), _hoverScrolling)
    });
  }

  return styles;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVCYXNpY1N0eWxlU2V0LmpzIl0sIm5hbWVzIjpbIkRPVF9CT1hfU0laRSIsIkRPVF9TSVpFIiwiY3JlYXRlRG90c0JveENTUyIsImhlaWdodCIsImFsaWduSXRlbXMiLCJib3R0b20iLCJqdXN0aWZ5Q29udGVudCIsIndpZHRoIiwiY3JlYXRlRG90c0l0ZW1DU1MiLCJib3hTaXplIiwiY3Vyc29yIiwic2l6ZSIsImRpc3BsYXkiLCJsZWZ0IiwibWFyZ2luIiwib3BhY2l0eSIsInBvc2l0aW9uIiwidG9wIiwiYmFja2dyb3VuZCIsImJvcmRlclJhZGl1cyIsIkZMSVBQRVJfQk9YX1dJRFRIIiwiRkxJUFBFUl9TSVpFIiwiY3JlYXRlRmxpcHBlckJveENTUyIsImJveFdpZHRoIiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJmb250RmFtaWx5IiwibWFwIiwiZm9udCIsImpvaW4iLCJmb250U2l6ZSIsImxpbmVIZWlnaHQiLCJ0cmFuc2l0aW9uUHJvcGVydHkiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJjcmVhdGVMZWZ0RmxpcHBlckNTUyIsIm9wdGlvbnMiLCJjcmVhdGVSaWdodEZsaXBwZXJDU1MiLCJyaWdodCIsIlNDUk9MTF9CQVJfSEVJR0hUIiwiU0NST0xMX0JBUl9NQVJHSU4iLCJjcmVhdGVTY3JvbGxCYXJCb3hDU1MiLCJwYWRkaW5nIiwidHJhbnNpdGlvbkRlbGF5IiwiY3JlYXRlU2Nyb2xsQmFySGFuZGxlckNTUyIsImJhY2tkcm9wRmlsdGVyIiwiYXV0b0hpZGUiLCJkb3RCb3hTaXplIiwiZG90U2l6ZSIsImZsaXBwZXJCb3hXaWR0aCIsImZsaXBwZXJTaXplIiwic2Nyb2xsQmFySGVpZ2h0Iiwic2Nyb2xsQmFyTWFyZ2luIiwic3R5bGVzIiwiY2Fyb3VzZWwiLCJkb3RzQm94IiwiZG90c0l0ZW0iLCJsZWZ0RmxpcHBlciIsInJpZ2h0RmxpcHBlciIsInNjcm9sbEJhckJveCIsInNjcm9sbEJhckhhbmRsZXIiLCJmbGlw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QSxrQkFBa0IsRUFBRSxPQUh5QjtBQUk3Q0QsTUFBQUEsa0JBQWtCLEVBQUU7QUFKeUIsS0FBekIsQ0FBdEIsQ0FsQ1ksQ0F5Q1o7O0FBQ0FvQixJQUFBQSxNQUFNLENBQUNDLFFBQVAsR0FBa0IsaUJBQUk7QUFDcEIsbUdBQ1VELE1BQU0sQ0FBQ00sWUFBUCxHQUFzQixFQURoQyxrQkFDNENOLE1BQU0sQ0FBQ0ksV0FBUCxHQUFxQixFQURqRSwrQkFDMEZKLE1BQU0sQ0FBQ0ssWUFBUCxHQUFzQixFQURoSCxvQkFDcUk7QUFDakk7QUFDQWYsUUFBQUEsZUFBZSxFQUFFO0FBRmdILE9BRHJJLGlEQU1VVSxNQUFNLENBQUNNLFlBQVAsR0FBc0IsRUFOaEMsR0FNd0M7QUFDcENyRCxRQUFBQSxNQUFNLEVBQUU7QUFENEIsT0FOeEMsaURBVVUrQyxNQUFNLENBQUNJLFdBQVAsR0FBcUIsRUFWL0Isb0JBVW9EO0FBQ2hEM0MsUUFBQUEsSUFBSSxFQUFFO0FBRDBDLE9BVnBELGlEQWNVdUMsTUFBTSxDQUFDSyxZQUFQLEdBQXNCLEVBZGhDLG9CQWNxRDtBQUNqRHBCLFFBQUFBLEtBQUssRUFBRTtBQUQwQyxPQWRyRDtBQURvQixLQUFKLENBQWxCO0FBb0JEOztBQUVELFNBQU9lLE1BQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ2dsYW1vcic7XG5cbmNvbnN0IERPVF9CT1hfU0laRSA9IDIwO1xuY29uc3QgRE9UX1NJWkUgPSA2O1xuXG5jb25zdCBjcmVhdGVEb3RzQm94Q1NTID0gKHsgaGVpZ2h0IH0pID0+IGNzcyh7XG4gIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICBib3R0b206IDAsXG4gIGhlaWdodCxcbiAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICB3aWR0aDogJzEwMCUnXG59KTtcblxuY29uc3QgY3JlYXRlRG90c0l0ZW1DU1MgPSAoeyBib3hTaXplLCBjdXJzb3IsIHNpemUgfSkgPT4gY3NzKHtcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAgaGVpZ2h0OiBib3hTaXplLFxuICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIHdpZHRoOiBib3hTaXplLFxuXG4gICcmID4gaW5wdXQnOiB7XG4gICAgLi4uY3Vyc29yID8geyBjdXJzb3IgfSA6IHt9LFxuXG4gICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgbGVmdDogMCxcbiAgICBtYXJnaW46IDAsXG4gICAgb3BhY2l0eTogMCxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgd2lkdGg6ICcxMDAlJ1xuICB9LFxuXG4gICcmID4gZGl2Jzoge1xuICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIC4yKScsXG4gICAgYm9yZGVyUmFkaXVzOiBzaXplIC8gMixcbiAgICBoZWlnaHQ6IHNpemUsXG4gICAgd2lkdGg6IHNpemVcbiAgfSxcblxuICAnJjpob3ZlciA+IGRpdiwgJiA+IGlucHV0OmZvY3VzICsgZGl2Jzoge1xuICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIC40KSdcbiAgfSxcblxuICAnJiA+IGlucHV0OmFjdGl2ZSArIGRpdic6IHtcbiAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAuOCknXG4gIH0sXG5cbiAgJyYgPiBpbnB1dDpjaGVja2VkOm5vdCg6YWN0aXZlKSArIGRpdic6IHtcbiAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAuNiknXG4gIH1cbn0pO1xuXG5jb25zdCBGTElQUEVSX0JPWF9XSURUSCA9IDYwO1xuY29uc3QgRkxJUFBFUl9TSVpFID0gNDA7XG5cbmNvbnN0IGNyZWF0ZUZsaXBwZXJCb3hDU1MgPSAoeyBib3hXaWR0aCwgY3Vyc29yLCBzaXplIH0pID0+IGNzcyh7XG4gIC4uLmN1cnNvciA/IHsgY3Vyc29yIH0gOiB7fSxcblxuICBiYWNrZ3JvdW5kOiAnVHJhbnNwYXJlbnQnLFxuICBoZWlnaHQ6ICcxMDAlJyxcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIHRvcDogMCxcbiAgd2lkdGg6IGJveFdpZHRoLFxuXG4gICcmID4gZGl2LnNsaWRlcic6IHtcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgaGVpZ2h0OiAnMTAwJScsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICB3aWR0aDogJzEwMCUnLFxuXG4gICAgJyYgPiBkaXYnOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsIDAsIDAsIC42KScsXG4gICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIC42KScsXG4gICAgICBmb250RmFtaWx5OiBbJ0NvbnNvbGFzJywgJ21vbm9zcGFjZSddLm1hcChmb250ID0+IGAnJHsgZm9udCB9J2ApLmpvaW4oJywgJyksXG4gICAgICBmb250U2l6ZTogMTYsXG4gICAgICBoZWlnaHQ6IHNpemUsXG4gICAgICBsaW5lSGVpZ2h0OiBgJHsgc2l6ZSB9cHhgLFxuICAgICAgdHJhbnNpdGlvblByb3BlcnR5OiAnYmFja2dyb3VuZC1jb2xvcicsXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICcxMDBtcycsXG4gICAgICB3aWR0aDogc2l6ZVxuICAgIH1cbiAgfSxcblxuICAnJjpob3ZlciwgJjpmb2N1cyc6IHsgJyYgPiBkaXYuc2xpZGVyID4gZGl2Jzoge1xuICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwgMCwgMCwgLjgpJyxcbiAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgLjgpJyxcbiAgICB0cmFuc2l0aW9uRHVyYXRpb246IDBcbiAgfSB9LFxuXG4gICcmOmFjdGl2ZSA+IGRpdi5zbGlkZXIgPiBkaXYnOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAnQmxhY2snLFxuICAgIGNvbG9yOiAnV2hpdGUnLFxuICAgIHRyYW5zaXRpb25EdXJhdGlvbjogMFxuICB9XG59KTtcblxuY29uc3QgY3JlYXRlTGVmdEZsaXBwZXJDU1MgPSBvcHRpb25zID0+IGNzcyh7XG4gIGxlZnQ6IDAsXG5cbiAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgIGxlZnQ6IDBcbiAgfVxufSwgY3JlYXRlRmxpcHBlckJveENTUyhvcHRpb25zKSk7XG5cbmNvbnN0IGNyZWF0ZVJpZ2h0RmxpcHBlckNTUyA9IG9wdGlvbnMgPT4gY3NzKHtcbiAgcmlnaHQ6IDAsXG5cbiAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgIHJpZ2h0OiAwXG4gIH1cbn0sIGNyZWF0ZUZsaXBwZXJCb3hDU1Mob3B0aW9ucykpO1xuXG5jb25zdCBTQ1JPTExfQkFSX0hFSUdIVCA9IDg7XG5jb25zdCBTQ1JPTExfQkFSX01BUkdJTiA9IDQ7XG5cbmNvbnN0IGNyZWF0ZVNjcm9sbEJhckJveENTUyA9ICh7IG1hcmdpbiB9KSA9PiBjc3Moe1xuICBib3R0b206IDAsXG4gIHBhZGRpbmc6IG1hcmdpbixcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIHRyYW5zaXRpb25EZWxheTogJzFzJyxcbiAgdHJhbnNpdGlvbkR1cmF0aW9uOiAnMzAwbXMnLFxuICB0cmFuc2l0aW9uUHJvcGVydHk6ICdib3R0b20nLFxuICB3aWR0aDogJzEwMCUnXG59KTtcblxuY29uc3QgY3JlYXRlU2Nyb2xsQmFySGFuZGxlckNTUyA9ICh7IGhlaWdodCB9KSA9PiBjc3Moe1xuICBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoNHB4KScsXG4gIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIC40KScsXG4gIGJvcmRlclJhZGl1czogaGVpZ2h0IC8gMixcbiAgaGVpZ2h0XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHtcbiAgYXV0b0hpZGUgICAgICAgID0gdHJ1ZSxcbiAgY3Vyc29yICAgICAgICAgID0gJ3BvaW50ZXInLFxuICBkb3RCb3hTaXplICAgICAgPSBET1RfQk9YX1NJWkUsXG4gIGRvdFNpemUgICAgICAgICA9IERPVF9TSVpFLFxuICBmbGlwcGVyQm94V2lkdGggPSBGTElQUEVSX0JPWF9XSURUSCxcbiAgZmxpcHBlclNpemUgICAgID0gRkxJUFBFUl9TSVpFLFxuICBzY3JvbGxCYXJIZWlnaHQgPSBTQ1JPTExfQkFSX0hFSUdIVCxcbiAgc2Nyb2xsQmFyTWFyZ2luID0gU0NST0xMX0JBUl9NQVJHSU5cbn0gPSB7fSkge1xuICBjb25zdCBzdHlsZXMgPSB7XG4gICAgY2Fyb3VzZWwgICAgICAgIDogJycsXG4gICAgZG90c0JveCAgICAgICAgIDogY3JlYXRlRG90c0JveENTUyh7IGhlaWdodDogZG90Qm94U2l6ZSB9KSxcbiAgICBkb3RzSXRlbSAgICAgICAgOiBjcmVhdGVEb3RzSXRlbUNTUyh7IGJveFNpemU6IGRvdEJveFNpemUsIGN1cnNvciwgc2l6ZTogZG90U2l6ZSB9KSxcbiAgICBsZWZ0RmxpcHBlciAgICAgOiBjcmVhdGVMZWZ0RmxpcHBlckNTUyh7IGJveFdpZHRoOiBmbGlwcGVyQm94V2lkdGgsIGN1cnNvciwgc2l6ZTogZmxpcHBlclNpemUgfSksXG4gICAgcmlnaHRGbGlwcGVyICAgIDogY3JlYXRlUmlnaHRGbGlwcGVyQ1NTKHsgYm94V2lkdGg6IGZsaXBwZXJCb3hXaWR0aCwgY3Vyc29yLCBzaXplOiBmbGlwcGVyU2l6ZSB9KSxcbiAgICBzY3JvbGxCYXJCb3ggICAgOiBjcmVhdGVTY3JvbGxCYXJCb3hDU1MoeyBtYXJnaW46IHNjcm9sbEJhck1hcmdpbiB9KSxcbiAgICBzY3JvbGxCYXJIYW5kbGVyOiBjcmVhdGVTY3JvbGxCYXJIYW5kbGVyQ1NTKHsgaGVpZ2h0OiBzY3JvbGxCYXJIZWlnaHQgfSlcbiAgfTtcblxuICAvLyBUaGlzIGlzIGZvciBvdmVycmlkaW5nIGV4aXN0aW5nIHJ1bGVzIHdpdGggYXV0by1oaWRlIENTUyB0cmFuc2l0aW9uc1xuICBpZiAoYXV0b0hpZGUpIHtcbiAgICBjb25zdCBmbGlwcGVyT3ZlcnJpZGVzID0ge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICB0b3A6IDAsXG4gICAgICB0cmFuc2l0aW9uRGVsYXk6ICcxcycsXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICczMDBtcydcbiAgICB9O1xuXG4gICAgc3R5bGVzLmxlZnRGbGlwcGVyID0gY3NzKHN0eWxlcy5sZWZ0RmxpcHBlciwge1xuICAgICAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgICAgICAuLi5mbGlwcGVyT3ZlcnJpZGVzLFxuICAgICAgICBsZWZ0OiAtNTAsXG4gICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ2xlZnQnLFxuICAgICAgfSxcblxuICAgICAgJyY6Zm9jdXMgPiBkaXYuc2xpZGVyJzoge1xuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0cmFuc2l0aW9uRGVsYXk6ICcwcydcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHN0eWxlcy5yaWdodEZsaXBwZXIgPSBjc3Moc3R5bGVzLnJpZ2h0RmxpcHBlciwge1xuICAgICAgJyYgPiBkaXYuc2xpZGVyJzoge1xuICAgICAgICAuLi5mbGlwcGVyT3ZlcnJpZGVzLFxuICAgICAgICByaWdodDogLTUwLFxuICAgICAgICB0cmFuc2l0aW9uUHJvcGVydHk6ICdyaWdodCdcbiAgICAgIH0sXG5cbiAgICAgICcmOmZvY3VzID4gZGl2LnNsaWRlcic6IHtcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIHRyYW5zaXRpb25EZWxheTogJzBzJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3R5bGVzLnNjcm9sbEJhckJveCA9IGNzcyhzdHlsZXMuc2Nyb2xsQmFyQm94LCB7XG4gICAgICBib3R0b206IC0zMCxcbiAgICAgIHRyYW5zaXRpb25EZWxheTogJzFzJyxcbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogJzMwMG1zJyxcbiAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ2JvdHRvbSdcbiAgICB9KTtcblxuICAgIC8vIFRoZSBhdXRvLWhpZGUgc3RhdGUgaXMgZGVmaW5lZCBpbiBhcmNoLXN0eWxlIChjYXJvdXNlbCkgZm9yIGl0cyBgaG92ZXJgIHBzZXVkbyBjbGFzc1xuICAgIHN0eWxlcy5jYXJvdXNlbCA9IGNzcyh7XG4gICAgICAnJjpob3ZlciwgJi5zY3JvbGxpbmcnOiB7XG4gICAgICAgIFtgJiAuJHsgc3R5bGVzLnNjcm9sbEJhckJveCArICcnIH0sICYgLiR7IHN0eWxlcy5sZWZ0RmxpcHBlciArICcnIH0gPiBkaXYuc2xpZGVyLCAmIC4keyBzdHlsZXMucmlnaHRGbGlwcGVyICsgJycgfSA+IGRpdi5zbGlkZXJgXToge1xuICAgICAgICAgIC8vIENvbnRyb2xzIHNob3cgdXAgYXMgc29vbiBhcyB0aGUgdXNlciBob3ZlciBvbiBpdFxuICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogJzBzJ1xuICAgICAgICB9LFxuXG4gICAgICAgIFtgJiAuJHsgc3R5bGVzLnNjcm9sbEJhckJveCArICcnIH1gXToge1xuICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICB9LFxuXG4gICAgICAgIFtgJiAuJHsgc3R5bGVzLmxlZnRGbGlwcGVyICsgJycgfSA+IGRpdi5zbGlkZXJgXToge1xuICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgfSxcblxuICAgICAgICBbYCYgLiR7IHN0eWxlcy5yaWdodEZsaXBwZXIgKyAnJyB9ID4gZGl2LnNsaWRlcmBdOiB7XG4gICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cbiJdfQ==